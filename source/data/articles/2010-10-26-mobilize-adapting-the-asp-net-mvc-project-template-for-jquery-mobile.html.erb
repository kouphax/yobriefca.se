--- 
layout: post
title: Mobilize! Adapting the ASP.NET MVC Project Template for jQuery Mobile
published: true
categories: [.NET]
---
  <p class='img-holder'><img src="http://farm3.static.flickr.com/2413/5721975436_fb47349a04_o.png" alt=""></p><p style="text-align: right;"><em><span style="font-size: xx-small;"><span style="font-size: xx-small;">Image</span> courtesy of the  awesome </span></em><em><span style="font-size: xx-small;"><a href="http://www.threadless.com/">Threadless</a></span></em></p><p>Having tinkered with <a href="http://yobriefcase.posterous.com/practical-jquery-mobile-with-aspnet-mvc">jQuery  Mobile and MVC</a> a bit recently but I wanted to do a bit more.&nbsp; The first app  I wrote was read only which is actually pretty easy to accomplish regardless of  technology/framework.&nbsp; So I wanted to try a little something different,  something a kin to a real application.&nbsp; However time and coders block left me  with little inspiration for creating the worlds next amazing mobile app.&nbsp;  Sitting there with a new ASP.NET MVC project open in Visual Studio I couldn&rsquo;t  think of what to write.&nbsp; Then it struck me&hellip; don&rsquo;t write anything.&nbsp; The MVC  starter skeleton project was sitting right there why not just mobilise it?&nbsp; So I  did.&nbsp; Without modifying any server side code and only tweaking the views I found  I was able to create a fully jquery-mobilified version of the template.&nbsp; Here&rsquo;s  what I did.</p><h2>Clean House</h2><p>We need to strip some of the dead weight out of our project including some of  the mark up and resources,</p><h3>Resources</h3><p>First things first I dropped the current bundle of scripts (MS Ajax, jQuery  1.4.1, Validate etc.) and the Site.css.&nbsp; Next I added the jQuery Mobile  assets,</p><ul><li>jQuery 1.4.3 (jquery-1.4.3.js)</li><li>jQuery Mobile 1.0a1 (jquery.mobile-1.0a1.js)</li><li>jQuery Mobile CSS (jquery.mobile-1.0a1.css)</li><li>jQuery Mobile images</li></ul><p>In the following project structure</p><p class='img-holder'><img src='http://farm3.static.flickr.com/2696/5721416507_18861d0ae1_o.png'></p><h3>Site.Master</h3><p>Next I&nbsp;cut down the Site.Master to it&rsquo;s bare minimum and add the HTML5  DocType and the references to jQuery Mobile ,</p><p><script src="https://gist.github.com/646750.js"></script></p><p>I could have included the basic markup for a full page but I wanted to keep  it as flexible for now.&nbsp; I also removed the LogOnUserControl for now as I want  to just push it into the main page.</p><h2>Marking Up</h2><p>The next step was to tweak the markup of the pages so they comply with jQuery  Mobile and can be mobilised correctly.&nbsp; Most pages are marked up in the same way  so rather than list them all I&rsquo;ll just list the highlights.</p><h3>Home.aspx</h3><p><script src="https://gist.github.com/646756.js"></script></p><p>I have a top toolbar button for Login/Log Off (depending on context) and the  View.Message from the old page is included as the content of the page.</p><h3>Logon.aspx</h3><p><script src="https://gist.github.com/646757.js"></script></p><p>Gives us the login form and a link to the Register screen.&nbsp; I marked the  Register screen as a Dialog just to be a wee bit different.&nbsp; The Register screen  itself is marked up as a normal page (the framework handles the displaying of a  dialog automagically).&nbsp; I also added a different theme to the login button and a  &ldquo;pop&rdquo; transition to the Register dialog through the data- attributes.</p><p>One other thing I had to do was add a &ldquo;fieldcontain&rdquo; wrapper to the field  blocks as there was some layout issues.&nbsp; This is documented in the jQuery Mobile  docs.</p><h3>Register.aspx</h3><p><script src="https://gist.github.com/646760.js"></script></p><p>The most complex screen in the app.&nbsp; Nothing special added only some  different markup.</p><h2>Running It</h2><p>That was it.&nbsp; After adapting the rest of the pages (via manipulating markup)&nbsp;  I was left with a mobilized version of the MVC project template.&nbsp; Again I didn&rsquo;t  have to make any code changes&nbsp;&ndash; validation still worked, forms still worked,  login, register, change password&nbsp;&ndash; all worked as expected (screen shots&nbsp;from Chrome which has a few issues with rounded corners on fields in jQuery Mobile).</p><p class='img-holder'>  <img src='http://farm4.static.flickr.com/3502/5721975554_272b823481_o.png' width='200' style='border:1px solid #000;'>  <img src='http://farm3.static.flickr.com/2756/5721416629_4b4e7ebaed_o.png' width='200' style='border:1px solid #000;'>  <img src='http://farm3.static.flickr.com/2510/5721416689_20e25e2983_o.png' width='200' style='border:1px solid #000;'></p>