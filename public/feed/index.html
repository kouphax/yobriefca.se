<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Yo Briefcase!]]></title>
  <link href="http://yobriefca.se/feed/index.html" rel="self"/>
  <link href="http://yobriefca.se/"/>
  <updated>2012-07-12T13:49:59+01:00</updated>
  <id>http://yobriefca.se/</id>
  <author>
    <name><![CDATA[James Hughes]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Azure Website Workflow for Bosses]]></title>
    <link href="http://yobriefca.se/blog/2012/07/12/azure-website-workflow-for-bosses/"/>
    <updated>2012-07-12T12:23:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/12/azure-website-workflow-for-bosses</id>
    <content type="html"><![CDATA[<blockquote><p>So consider my indefinite hiatus suspended definitely.  I suck at quitting!  But we wont dive into the whys and wherefores  around that now.</p></blockquote>

<p>I&#8217;ve a confession to make, the &#8220;new&#8221; Azure, I like it.  Yeah I do, s&#8217;nice.  I like the way it blends PaaS with IaaS (though I do feel that adding 1st class node.js and PHP support is a bit of a tacked on marketing ploy).  So you dont have the &#8220;Add-On&#8221; model you get from Appharbor and Heroku but thats fine because this blending of &#8220;as a Services&#8221; gives you an alternate approach.  For a start you can just use the external services without them having to be &#8220;Add-Ons&#8221;.  Sure you lose out on the nice automatic integration points for managing your services but it&#8217;s not the end of the world and what happens when you want something that isn&#8217;t available as an Add-On or worse not available as a cloudy SaaS thing?  Well I guess you need to go off to EC2 or similar and host your own (assuming you want to stick with the cloudy infrastructure).  But with Azure you also get another option - you want to use Mongo or some huge enterprisey platform that isn&#8217;t SaaSified?  Stick it on an Azure VM.  Everything managed under one cloud provider.  Thats such a nice thing to have at your disposal.</p>

<p>But thats not the point of this post.  Most posts out there cover a workflow for Azure WebSites that make use of the portal to provision new sites (and then usually <code>git</code> to deploy) but that&#8217;s weak sauce (the portal part at least - gits still aces).  No, no no - You want hyper-productivity, you want automated provisioning,  you want to be hip; node.js hip; and you want to feel like a boss hanging out on your command line while other &#8220;lesser people&#8221; click stuff with a silly little rodent.  I just read your mind, didn&#8217;t I?  Well then - you got that with Azure.</p>

<h2>Setting Up</h2>

<p>First things first you need to install a few things.</p>

<h3>Installing node.js + NPM</h3>

<p><a href="http://nodejs.org/#download">Download</a></p>

<p>The tools are built and deployed in node via NPM, the node package manager so just run the one click installer and you&#8217;ll be all setup.</p>

<h3>Installing Azure CLI Tools</h3>

<p>Install these via NPM so fire up your terminal/command prompt/whatever and type</p>

<pre><code>npm install azure -g
</code></pre>

<p>Then let NPM install all the dependencies and what not (the <code>-g</code> option just tells NPM to install the tools globally so they are accessible from the command line)</p>

<h3>Adding your account</h3>

<p>Next up you need to tell azure what account to use so fire this command into you command line</p>

<pre><code>azure account download
</code></pre>

<p>You&#8217;ll then be taken to the Azure website and it should (assuming you&#8217;re logged in already) download a <code>publishsettings</code> file.  Next up you need to import this file into your azure toolchain.</p>

<pre><code>azure account import YOUR_DOWNLOADED_FILE.publishsettings
</code></pre>

<p>After some scrolling text you&#8217;ll be all set up and ready to deploy.  You&#8217;ll be asked to delete the file you downloaded - probably best to do this :)</p>

<h2>Creating the app</h2>

<p>OK then lets create an app - what we create is irrelevant here so lets just create the default ASP.NET MVC website and use that as our sample app.  Remeber though, if you&#8217;re a cutting edge awesome-addict to switch from .NET 4.5 to 4 or else you&#8217;ll get some issues when deploying your site to Azure.</p>

<p>Once you&#8217;ve created you app and saved it then you&#8217;ll want to intialise an empty repo at the root of the solution,</p>

<pre><code>git init
</code></pre>

<p>Then we need to create a site on Azure we can push to.</p>

<h2>Creating a new site</h2>

<p>Back to the command line now,</p>

<pre><code>azure site create SITE_NAME
</code></pre>

<p>If we execute this, again at the root of our solution, it will do a number of things,</p>

<ol>
<li>Validate the request (site name availability and what not)</li>
<li>Create a new site on Azure</li>
<li>Add a new git <code>remote</code> to your <code>.git\config</code> file</li>
</ol>


<h2>Pushing site</h2>

<p>As I&#8217;ve said the last command actually added a remote repo to our git configuration so if we do the usual gitty stuff (you&#8217;ll want to, for neatness sake, set up your <code>.gitignore</code> but we can skip this for brevity),</p>

<pre><code>git add -A
git commit -m "Boring commit message"
</code></pre>

<p>Now we push,</p>

<pre><code>git push azure master
</code></pre>

<p>Done!</p>

<h2>Viewing your site</h2>

<p>You could just browse to your new site but thats just not hip enough, hell no.  Instead lets launch it from the command line&#8230;</p>

<pre><code>azure site browse
</code></pre>

<p>That will launch our new site without having to touch a silly old, out of date rodent.</p>

<h2>Wrapping up</h2>

<p>Ok so thats the basic workflow for using CLI tools to manage Azure sites.  You can do this with most of the Azure services (VMs, Certs, Cloud Services etc.) aswell.</p>

<p>So apart from making you look all hackery working in the terminal it does have other uses, specifically around the fact terminal command can be easily executed in a headless automated environment.  Think of creating new sites as part of your CI&#8217;s deployment pipeline, or as part of some disaster recovery process.  The possibilities are endless&#8230; heck even write your own UI for managing sites or deploying new sites/VM/whatever!</p>

<p>So lets see -</p>

<ul>
<li>CLI hackery coolness&#8230; ✓</li>
<li>Node.js hipster bragging rights&#8230; ✓</li>
<li>Azure website created and deployed with about 6 commands&#8230; ✓</li>
</ul>


<p>Not bad for a few minutes work!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quitsies, Well Sort Of]]></title>
    <link href="http://yobriefca.se/blog/2012/07/03/quitsies/"/>
    <updated>2012-07-03T19:08:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/03/quitsies</id>
    <content type="html"><![CDATA[<blockquote><p>You know when you start to question why you write these things it&#8217;s probably time to quit, or at least take a break.</p>

<p> ~ me, just there now</p></blockquote>

<p>This more of an FYI to anyone who may read this blog than a horrible diatribe about how I am wasting my life with meaningless exercises or technologies I&#8217;ll never get to use to a bunch of people that don&#8217;t really care, what would be the point?  Plus - it&#8217;s probably not even true.</p>

<p>So rather than pottering on about cool and interesting technologies that will make everyones (read, developers) life infinitely better 100% guaranteed I&#8217;ve decided to devote my time to,</p>

<ol>
<li>Working on some startup-py type things that have been milling around the back of my head for some time, and,</li>
<li>Generally getting stuff done</li>
</ol>


<p>Yep, like a hipster band, this little testament to bike-shedding is going on indefinite hiatus.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[Quick and Dirty, Super Ugly,] Starter for 10 - Dropwizard]]></title>
    <link href="http://yobriefca.se/blog/2012/07/03/starter-for-10-dropwizard/"/>
    <updated>2012-07-03T13:07:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/03/starter-for-10-dropwizard</id>
    <content type="html"><![CDATA[<p>So once again I&#8217;m writing Java without a gun to my head, and once again I&#8217;m finding it enjoyable.  Don&#8217;t get me wrong Java as a language feels very long winded, old and cumbersome but the frameworks and stuff that exist around it actually make those issues, less prominent, so much so I think I could easily live with the noise that Java brings.</p>

<p>Anywho.</p>

<p><a href="http://dropwizard.codahale.com/">Dropwizard</a> is a framework for creating very simple ReSTful Web Services in Java.  Not just that but it also bundles some nice best practise in with it as well.  Things like pluggable health checks, logging, configuration, content negotiation etc.  And, because it&#8217;s fairly lightweight its fast.  Very fast.</p>

<p>In fact you can think of Dropwizard as a collection of pre-existing tools glued together with some simple features to create a cohesive stack for HTTP+JSON web services.  You&#8217;ve got <a href="http://www.eclipse.org/jetty/">Jetty</a>, <a href="http://jersey.java.net/">Jersey</a>, <a href="http://jackson.codehaus.org/">Jackson</a>, <a href="http://metrics.codahale.com/">Metrics</a>, <a href="http://logback.qos.ch/">Logback</a>, <a href="http://www.jdbi.org/">JDBI</a> and more.  Dropwizard give you the glue that binds these along with a simple pipeline that makes use of these technologies.</p>

<h2>Simple Todo</h2>

<p>I had intended to do something a little more substantial but I am about to make a small annoucemnet that has kind of effectivley stopped me expanding this app much further.  So lets create a simple Todo App.</p>

<h3>pom.xml</h3>

<p>As with most Java projects lets start with the <code>pom.xml</code> which is effectively our project definition.  I&#8217;ll not show you my entire POM, at least not on the first date, but let me reveal the important parts.</p>

<p> Beause it&#8217;s awesome I want to include WebJars so I add my repository,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>    <span class="nt">&lt;repositories&gt;</span>
</span><span class='line'>        <span class="nt">&lt;repository&gt;</span>
</span><span class='line'>            <span class="nt">&lt;id&gt;</span>webjars<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>            <span class="nt">&lt;url&gt;</span>http://webjars.github.com/m2<span class="nt">&lt;/url&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/repository&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/repositories&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next I add my dependencies,</p>

<ol>
<li>Dropwizard Core which has everything you&#8217;ll need for this</li>
<li>jQuery from the WebJar repository</li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>    <span class="nt">&lt;dependencies&gt;</span>
</span><span class='line'>        <span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>          <span class="nt">&lt;groupId&gt;</span>com.yammer.dropwizard<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>          <span class="nt">&lt;artifactId&gt;</span>dropwizard-core<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>          <span class="nt">&lt;version&gt;</span>0.4.2<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/dependency&gt;</span>
</span><span class='line'>        <span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>          <span class="nt">&lt;groupId&gt;</span>com.jquery<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>          <span class="nt">&lt;artifactId&gt;</span>jquery<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>          <span class="nt">&lt;version&gt;</span>1.7.2-1<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/dependency&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/dependencies&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I also add the <a href="http://maven.apache.org/plugins/maven-shade-plugin/">shade plugin</a> which will let me build a Fat Jar (a jar with all my dependencies and what not in it).</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>    <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>maven-shade-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;version&gt;</span>1.6<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>            <span class="nt">&lt;createDependencyReducedPom&gt;</span>true<span class="nt">&lt;/createDependencyReducedPom&gt;</span>
</span><span class='line'>            <span class="nt">&lt;filters&gt;</span>
</span><span class='line'>                <span class="nt">&lt;filter&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;artifact&gt;</span>*:*<span class="nt">&lt;/artifact&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;excludes&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;exclude&gt;</span>META-INF/*.SF<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;exclude&gt;</span>META-INF/*.DSA<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;exclude&gt;</span>META-INF/*.RSA<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;/excludes&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/filter&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/filters&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>        <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>            <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>                <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>                <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;goal&gt;</span>shade<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>                <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;transformers&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;mainClass&gt;</span>se.yobriefca.TodoService<span class="nt">&lt;/mainClass&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;/transformer&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;/transformers&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/plugin&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Configuration</h3>

<p>Dropwizard has the ability to map configuration options (from a YML or JSON file) into concrete classes that can be accessed by your services.  So first I created a todo.yml at the root of the project (beside the pom.xml) with some basic configuration</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>http:
</span><span class='line'>    rootPath: &quot;/app/*&quot;
</span></code></pre></td></tr></table></div></figure>


<p>This configuration tells Dropwizard that my services are located at a url starting with  <code>/app</code> - eg <code>/app/todo</code>.  This is necessary as I want to create an asset later that maps to the root url <code>/</code> that is the default of Dropwizard.  At this point I haven&#8217;t needed any of my own configuration but if I did I could create a POJO that maps to proeprties in this file.  The <a href="http://dropwizard.codahale.com/getting-started/#creating-a-configuration-class">official guide</a> has more on this.  For now I will create an empty <code>Configuration</code> class in case I want to extend it later (yeah I know YAGNI YAGNI KISS YAGNI - shutuppayourface!)</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">se</span><span class="o">.</span><span class="na">yobriefca</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.yammer.dropwizard.config.Configuration</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoConfiguration</span> <span class="kd">extends</span> <span class="n">Configuration</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Service</h3>

<p>The service is the core class in our solution.  It&#8217;s the thing that has the <code>main</code> as an entry point.  The thing that &#8220;set us up the resouces&#8221; and registers healthchecks and controls our service lifecycle.  You&#8217;d think there would be loads of code here?  Right?  Wrong!</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">se</span><span class="o">.</span><span class="na">yobriefca</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.yammer.dropwizard.Service</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.yammer.dropwizard.bundles.AssetsBundle</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.yammer.dropwizard.config.Environment</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">se.yobriefca.resources.TodoResource</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoService</span> <span class="kd">extends</span> <span class="n">Service</span><span class="o">&lt;</span><span class="n">TodoConfiguration</span><span class="o">&gt;</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">new</span> <span class="nf">TodoService</span><span class="o">().</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="nf">TodoService</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="kd">super</span><span class="o">(</span><span class="s">&quot;todo&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">AssetsBundle</span><span class="o">(</span><span class="s">&quot;/assets&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">));</span>
</span><span class='line'>        <span class="n">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">AssetsBundle</span><span class="o">(</span><span class="s">&quot;/public&quot;</span><span class="o">,</span> <span class="s">&quot;/public/&quot;</span><span class="o">));</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">TodoConfiguration</span> <span class="n">configuration</span><span class="o">,</span> <span class="n">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">environment</span><span class="o">.</span><span class="na">addResource</span><span class="o">(</span><span class="k">new</span> <span class="n">TodoResource</span><span class="o">());</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So all services extend <code>Service</code> and have a <code>Configuration</code> type (FYI these config types can be nested so its not as restrictive as I first thought).  Basically what we have is a <code>main</code> method that create an instance of our service and runs it.  Upon creation we add two bundles to the service.  A bundle is bascially a bit of functionality and in this case we create two <code>AssetBundles</code> which can be used to serve static content (embedded resources) upon request to a specific URL (think things like CSS, JavaScript, HTML etc.)  You&#8217;ll notice I am mapping 2 things bundles here and this is because I need to map to the WebJars directroy as well.  So when I got to <code>localhost/index.html</code> it will match the url pattern in the first AssetsBundle and look for a file <code>src/main/resources/assets/index.html</code>.</p>

<p>Finally we have the <code>initialize</code> method that allows us to decare mutliple resources and healthchecks against our environment.  We also get handed our configuration class we decalred in advance.</p>

<h3>A bit about healthchecks</h3>

<p>Healthchecks are little classes that perform some sort of test on a part of your solution.  For example we could have a database connectivity check.  These healthchecks are made available on the <a href="http://dropwizard.codahale.com/manual/core/#health-checks">admin section that is bound to another port</a> when your app starts.</p>

<p>Now I didn&#8217;t define any for this example and for that I feel absolutely terrible.  Seriously I kind of feel sick thinkging about it.  And whats worse Dropwizard kindly reminds me everytime I start the app - using LOTS of exclamantion marks and CAPS!!!  IRL you should really not follow my example here.</p>

<h3>Resources</h3>

<p>Resources are resources as they are identified in ReSTy things.  For example a <code>User</code> is a resource or an <code>Order</code> etc.  These things will respond to HTTP requests matched against the URL and the HTTP Method used.  In my example I have defined a resource <code>Todo</code> that can be used to list, create and delete (I didn&#8217;t need anything else for this).</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/todos&quot;</span><span class="o">)</span>
</span><span class='line'><span class="nd">@Produces</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TodoResource</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todos</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@GET</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todos</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@POST</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@Valid</span> <span class="n">Todo</span> <span class="n">todo</span><span class="o">){</span>
</span><span class='line'>        <span class="n">todos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">todo</span><span class="o">);</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@DELETE</span>
</span><span class='line'>    <span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/{id}&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Todo</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">)</span> <span class="kd">final</span> <span class="n">LongParam</span> <span class="n">id</span><span class="o">){</span>
</span><span class='line'>        <span class="n">Todo</span> <span class="n">todo</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span> <span class="n">todoCopy</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">(</span><span class="n">todos</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">todos</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// loop past all items in the list and replace the changed one</span>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="n">Todo</span> <span class="nl">element:</span> <span class="n">todoCopy</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">if</span><span class="o">(</span><span class="n">element</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">!=</span> <span class="n">id</span><span class="o">.</span><span class="na">get</span><span class="o">()){</span>
</span><span class='line'>                <span class="n">todos</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span><span class='line'>                <span class="n">todo</span> <span class="o">=</span> <span class="n">element</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">todo</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Again not a great deal of code and what code that is there is fairly straightforward - some would say boilerplate.  We use annotations to map our HTTP Methods <code>@GET</code>, <code>@POST</code> and <code>@DELETE</code> as well as a <code>@Path(...)</code> annotation to specify what url this resource resonds to.  Another nice feature we can see annotated here is we get both validation (via the @Valid annotation which is based on Hibernates Validation framework) and JSON model binding via Jackson and model annotations (get to that in a minute).</p>

<p>For this simple demo I am storing a list of Todos in an ArrayList in memory (top of the class).</p>

<h3>Model</h3>

<p>The model is, bar all the annotations to enable serialisation, fairly POJO-like,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Todo</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Not So Universally Unique!</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">AtomicLong</span> <span class="n">NSUUID</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtomicLong</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@JsonProperty</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@NotEmpty</span>
</span><span class='line'>    <span class="nd">@JsonProperty</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">content</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@JsonCreator</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">Todo</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;content&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">NSUUID</span><span class="o">.</span><span class="na">incrementAndGet</span><span class="o">();</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getContent</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">content</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getId</span><span class="o">(){</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;ve put this in more for completeness as there is little involved in this.</p>

<h3>index.html</h3>

<p>I am not going to create some elaborate over architected front end here - just a few lines of JavaScript (ignoring the rather large jQuery library included of course) and not styling.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>Demo<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;task&quot;</span> <span class="nt">/&gt;</span> <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;addTask&quot;</span><span class="nt">&gt;</span>Add Task<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;todos&quot;</span><span class="nt">&gt;&lt;/ul&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&#39;text/javascript&#39;</span> <span class="na">src=</span><span class="s">&#39;/public/jquery.min.js&#39;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script&gt;</span>
</span><span class='line'>      <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="c1">// load and replace the list</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s2">&quot;/app/todos&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">todos</span><span class="p">){</span>
</span><span class='line'>          <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">todos</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
</span><span class='line'>            <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#todos&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span>
</span><span class='line'>              <span class="s2">&quot;&lt;li&gt;&lt;input type=&#39;checkbox&#39; data-id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">todos</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">id</span> <span class="o">+</span><span class="s2">&quot;&#39;/&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                <span class="nx">todos</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">content</span> <span class="o">+</span>
</span><span class='line'>              <span class="s2">&quot;&lt;/li&gt;&quot;</span>
</span><span class='line'>            <span class="p">)</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// manage adding a new task</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#addTask&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>            <span class="nx">url</span><span class="o">:</span>         <span class="s2">&quot;/app/todos&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">type</span><span class="o">:</span>        <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">data</span><span class="o">:</span>        <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="nx">content</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#task&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="p">}),</span>
</span><span class='line'>            <span class="nx">contentType</span><span class="o">:</span> <span class="s2">&quot;application/json; charset=utf-8&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">dataType</span><span class="o">:</span>    <span class="s2">&quot;json&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">success</span><span class="o">:</span>     <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">){</span>
</span><span class='line'>              <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#todos&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span>
</span><span class='line'>                <span class="s2">&quot;&lt;li&gt;&lt;input type=&#39;checkbox&#39; data-id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span><span class="s2">&quot;&#39;/&gt;&quot;</span> <span class="o">+</span>
</span><span class='line'>                  <span class="nx">data</span><span class="p">.</span><span class="nx">content</span> <span class="o">+</span>
</span><span class='line'>                <span class="s2">&quot;&lt;/li&gt;&quot;</span>
</span><span class='line'>              <span class="p">)</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>          <span class="p">})</span>
</span><span class='line'>        <span class="p">})</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#todos&quot;</span><span class="p">).</span><span class="nx">delegate</span><span class="p">(</span><span class="s2">&quot;input[type=checkbox]&quot;</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">chk</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">item</span> <span class="o">=</span> <span class="nx">chk</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">),</span>
</span><span class='line'>          <span class="nx">id</span>   <span class="o">=</span> <span class="nx">chk</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>          <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>            <span class="nx">url</span><span class="o">:</span>         <span class="s2">&quot;/app/todos/&quot;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">type</span><span class="o">:</span>        <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">contentType</span><span class="o">:</span> <span class="s2">&quot;application/json; charset=utf-8&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">dataType</span><span class="o">:</span>    <span class="s2">&quot;json&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">success</span><span class="o">:</span>     <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">){</span>
</span><span class='line'>              <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">){</span>
</span><span class='line'>                <span class="nx">item</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span><span class="s2">&quot;text-decoration&quot;</span><span class="o">:</span> <span class="s2">&quot;line-through&quot;</span><span class="p">});</span>
</span><span class='line'>                <span class="nx">chk</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>          <span class="p">})</span>
</span><span class='line'>        <span class="p">})</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'>    <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And thats it.  Oh wait I also added a boot command that peforms the maven packing and starts the jar.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mvn package;java -jar target/todo-0.1.jar server todo.yml</span></code></pre></td></tr></table></div></figure>


<p>Just run <code>./boot</code> (assuming you&#8217;ve chmod&#8217;d the file to be executable) and you&#8217;ll have, assuming I (or you) haven&#8217;t made any mistakes, a Todo service running on port 8080 (with admin/diagnostics stuff on port 8081).</p>

<p>As always the <a href="https://github.com/kouphax/dropwizard-todo">example code is available on Github</a>.  Sorry for the rushed nature of this post, I&#8217;ll hopefully keep tweaking the example on Github till it&#8217;s a bit nicer - perhaps even with tests and comments (YEAH RIGHT!!!!)</p>

<p>In short - Dropwizard - simple ReST services, very little config, very nice.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Super Basic Trello API Wrapper for Scala and Play]]></title>
    <link href="http://yobriefca.se/blog/2012/06/25/super-basic-trello-api-wrapper-for-scala-and-play/"/>
    <updated>2012-06-25T14:43:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/06/25/super-basic-trello-api-wrapper-for-scala-and-play</id>
    <content type="html"><![CDATA[<p>So I am currently doing a bit of work with using Trello as a kind of data store and decided to write a litle app in <a href="http://playframework.org">Play!</a> (the Scala variety of course).  There didn&#8217;t appear to be a library out there to handle some of the basic Trello stuff so over the past 20 minutes I put one together.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">import</span> <span class="nn">play.api.libs.ws.WS</span>
</span><span class='line'>
</span><span class='line'><span class="k">case</span> <span class="k">class</span> <span class="nc">Trello</span><span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">token</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">val</span> <span class="n">host</span> <span class="k">=</span> <span class="s">&quot;https://api.trello.com&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">get</span><span class="o">(</span><span class="n">uri</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">query</span><span class="k">:</span> <span class="o">(</span><span class="kt">String</span><span class="o">,</span><span class="kt">String</span><span class="o">)*)</span> <span class="k">=</span> <span class="n">request</span><span class="o">(</span><span class="n">uri</span><span class="o">,</span> <span class="n">query</span><span class="k">:_</span><span class="kt">*</span><span class="o">).</span><span class="n">get</span><span class="o">()</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">post</span><span class="o">(</span><span class="n">uri</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">query</span><span class="k">:</span> <span class="o">(</span><span class="kt">String</span><span class="o">,</span><span class="kt">String</span><span class="o">)*)</span> <span class="k">=</span> <span class="n">request</span><span class="o">(</span><span class="n">uri</span><span class="o">,</span> <span class="n">query</span><span class="k">:_</span><span class="kt">*</span><span class="o">).</span><span class="n">post</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">put</span><span class="o">(</span><span class="n">uri</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">query</span><span class="k">:</span> <span class="o">(</span><span class="kt">String</span><span class="o">,</span><span class="kt">String</span><span class="o">)*)</span> <span class="k">=</span> <span class="n">request</span><span class="o">(</span><span class="n">uri</span><span class="o">,</span> <span class="n">query</span><span class="k">:_</span><span class="kt">*</span><span class="o">).</span><span class="n">put</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">delete</span><span class="o">(</span><span class="n">uri</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">query</span><span class="k">:</span> <span class="o">(</span><span class="kt">String</span><span class="o">,</span><span class="kt">String</span><span class="o">)*)</span> <span class="k">=</span> <span class="n">request</span><span class="o">(</span><span class="n">uri</span><span class="o">,</span> <span class="n">query</span><span class="k">:_</span><span class="kt">*</span><span class="o">).</span><span class="n">delete</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span> <span class="k">def</span> <span class="n">request</span><span class="o">(</span><span class="n">uri</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">query</span><span class="k">:</span> <span class="o">(</span><span class="kt">String</span><span class="o">,</span><span class="kt">String</span><span class="o">)*)</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="nc">WS</span><span class="o">.</span><span class="n">url</span><span class="o">(</span><span class="n">host</span> <span class="o">+</span> <span class="o">(</span><span class="n">uri</span><span class="o">.</span><span class="n">startsWith</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">case</span> <span class="kc">true</span> <span class="k">=&gt;</span> <span class="n">uri</span>
</span><span class='line'>      <span class="k">case</span> <span class="kc">false</span> <span class="k">=&gt;</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">uri</span>
</span><span class='line'>    <span class="o">})).</span><span class="n">withQueryString</span><span class="o">(</span><span class="n">query</span> <span class="o">++</span> <span class="nc">Seq</span><span class="o">(</span><span class="s">&quot;key&quot;</span> <span class="o">-&gt;</span> <span class="n">key</span><span class="o">,</span> <span class="s">&quot;token&quot;</span> <span class="o">-&gt;</span> <span class="n">token</span><span class="o">)</span><span class="k">:</span> <span class="k">_</span><span class="kt">*</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Yep it&#8217;s very basic and all but the <code>get</code> is untested (it&#8217;s all I&#8217;ve needed so far).  But in the spirit of shipping early this is a good start.  The class makes use of Play!s uberflexible <code>WS</code> class and returns <code>Promise[Request]</code> so you can use it like so (just an example)</p>

<p>A simple API object to wrap the Trello class instance to load cards and map them into my expected objects</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">Api</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">val</span> <span class="n">api</span> <span class="k">=</span> <span class="nc">Trello</span><span class="o">(</span><span class="nc">KEY</span><span class="o">,</span> <span class="nc">TOKEN</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">implicit</span> <span class="k">object</span> <span class="nc">CardFormat</span> <span class="k">extends</span> <span class="nc">Format</span><span class="o">[</span><span class="kt">Card</span><span class="o">]</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">def</span> <span class="n">reads</span><span class="o">(</span><span class="n">json</span><span class="k">:</span> <span class="kt">JsValue</span><span class="o">)</span><span class="k">:</span> <span class="kt">Card</span> <span class="o">=</span> <span class="nc">Card</span><span class="o">(</span>
</span><span class='line'>      <span class="o">(</span><span class="n">json</span> <span class="o">\</span> <span class="s">&quot;name&quot;</span><span class="o">).</span><span class="n">as</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
</span><span class='line'>      <span class="o">(</span><span class="n">json</span> <span class="o">\</span> <span class="s">&quot;due&quot;</span><span class="o">).</span><span class="n">as</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span>
</span><span class='line'>    <span class="o">)</span>
</span><span class='line'>    <span class="k">def</span> <span class="n">writes</span><span class="o">(</span><span class="n">card</span><span class="k">:</span> <span class="kt">Card</span><span class="o">)</span><span class="k">:</span> <span class="kt">JsValue</span> <span class="o">=</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">NotImplementedException</span><span class="o">()</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">getPastTalks</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;/1/lists/_____&quot;</span><span class="o">,</span> <span class="s">&quot;cards&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;open&quot;</span><span class="o">,</span> <span class="s">&quot;card_fields&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;desc,name,due&quot;</span><span class="o">).</span><span class="n">map</span> <span class="o">{</span> <span class="n">res</span> <span class="k">=&gt;</span>
</span><span class='line'>      <span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="n">json</span> <span class="o">\</span> <span class="s">&quot;cards&quot;</span><span class="o">)</span> <span class="k">match</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="nc">JsArray</span><span class="o">(</span><span class="n">cards</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">cards</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">_</span><span class="o">.</span><span class="n">as</span><span class="o">[</span><span class="kt">Card</span><span class="o">])</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And calling this bad boy from a controller.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
</span><span class='line'>    <span class="nc">Async</span> <span class="o">{</span>
</span><span class='line'>      <span class="nc">Api</span><span class="o">.</span><span class="n">getPastTalks</span><span class="o">.</span><span class="n">map</span> <span class="o">{</span> <span class="n">talks</span> <span class="k">=&gt;</span>
</span><span class='line'>        <span class="nc">Ok</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="n">talks</span><span class="o">))</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So - lots of work to do around this - I want to move away from a thin wrapper to something a bit more robust with strong classes for the different entites.</p>

<p>Also if you want to find out where to get the API keys etc. go read the decent <a href="https://trello.com/docs/">API docs from Trello</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Two Hidden Gems in Play 2's Template Engine]]></title>
    <link href="http://yobriefca.se/blog/2012/06/17/two-hidden-gems-in-play-2s-template-engine/"/>
    <updated>2012-06-17T19:06:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/06/17/two-hidden-gems-in-play-2s-template-engine</id>
    <content type="html"><![CDATA[<p>Poking around some <a href="http://www.playframework.org/">Play 2</a> <a href="http://www.playframework.org/documentation/2.0.1/Samples">samples</a> today I came across some little bits of sugar.  I haven&#8217;t seen mention of them in other places (they must be well hidden) but they are two very common things I&#8217;ve implemented in less elegant ways in the past.  That was reason enough for me to throw a quick post up about them.</p>

<p>Prepare to have your minds blown.  Well not blown - gently nudged probably.</p>

<h2>String.when</h2>

<p><code>"somestring".when(predicate: =&gt; Boolean)</code> allows you conditionally spit out the value of the string it is called on (otherwise returning and empty string).</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="s">&quot;returned_string&quot;</span><span class="o">.</span><span class="n">when</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>      <span class="c1">// returns &quot;returned_string&quot;</span>
</span><span class='line'><span class="s">&quot;nonreturned_string&quot;</span><span class="o">.</span><span class="n">when</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>  <span class="c1">// returns &quot;&quot; (empty string)</span>
</span></code></pre></td></tr></table></div></figure>


<p>So in the context of views what is this good for?  Lots of things but the most clever use for this little function is conditional css.  Imagine you&#8217;ve got a block of HTML that represents a message area. These messages can be either good or bad and so we need to add the css class of <code>message-bad</code> depending on an argument passed in to the view.  A very quick and dirty way of handling this would be as such</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="o">@(</span><span class="n">message</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">successful</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="-Symbol">&#39;message</span> <span class="nd">@if</span><span class="o">(!</span><span class="n">successful</span><span class="o">){</span> <span class="s">&quot;message-bad&quot;</span> <span class="o">}</span><span class="err">&#39;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nd">@message</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Grand, fine.  It&#8217;s a bit noisy but it works. <code>when()</code> makes this a bit neater IMHO.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="o">@(</span><span class="n">message</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">successful</span><span class="k">:</span> <span class="kt">Boolean</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="-Symbol">&#39;message</span> <span class="o">@(</span><span class="s">&quot;message-bad&quot;</span><span class="o">.</span><span class="n">when</span><span class="o">(!</span><span class="n">successful</span><span class="o">))</span><span class="err">&#39;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nd">@message</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Yep the line is the same length but it looks more like a single block of conditional code, it flows much better and, I think at least, is much more readable.</p>

<h2>Date.format(&#8220;&lt;date-format>&#8221;)</h2>

<p><code>new java.util.Date().format(pattern: String)</code> allows you to specify how a date should be formatted in the rendered HTML.  It&#8217;s essentially shorthand for the noise-fest that is <code>SimpleDateFormat</code></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="n">pattern</span><span class="o">).</span><span class="n">format</span><span class="o">(</span><span class="n">date</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the past I&#8217;ve added transient properties to models for displaying the date, or written my own methods on those models.  Both of those approaches should have had me taken out into a field and shot.  <code>format</code> makes things much more straightforward,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="o">@(</span><span class="n">importantDate</span><span class="k">:</span> <span class="kt">java.util.Date</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="nd">@importantDate</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="s">&quot;dd-MM-yyyy&quot;</span><span class="o">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the output will be along the lines of &#8220;29-01-2013&#8221; or whatever the date was.</p>

<p>OK so neither of these are ground breaking or earth shattering (wait they mean the same thing really dont they???) but they are neat to enough to warrant a shout-out here.  Anyone else have any little nuggets in Play 2 they want to share?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[.NET on a Diet]]></title>
    <link href="http://yobriefca.se/blog/2012/06/07/dot-net-on-a-diet/"/>
    <updated>2012-06-07T21:40:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/06/07/dot-net-on-a-diet</id>
    <content type="html"><![CDATA[<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="4fd0fb8d3bb27c001f0309b7" data-ratio="1.3333333333333333" src="http://yobriefca.se//speakerdeck.com/assets/embed.js"></script>


<h2>Description</h2>

<p>There are plenty of framework options in .NET. We have the big mainstream web frameworks like ASP.NET WebForms and MVC, the ORM abstractions and DataMappers in the form of Entity Framework, NHibernate and iBatis and services such as WCF requiring large amounts of careful configuration to get right. Unfortunately these frameworks can get in the way, abstractions breakdown and leak and eventually we end up fighting against the frameworks limitations.</p>

<p>This session will take a look at the feature-fit lightweight alternatives and how they can be used to compose a technology stack that is cruft-free and fit for purpose.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monotouch: C# + iOS = Good Times]]></title>
    <link href="http://yobriefca.se/blog/2012/06/07/monotouch-c-number-plus-ios-equals-good-times/"/>
    <updated>2012-06-07T21:38:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/06/07/monotouch-c-number-plus-ios-equals-good-times</id>
    <content type="html"><![CDATA[<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="4fd0fb533bb27c0022030674" data-ratio="1.3333333333333333" src="http://yobriefca.se//speakerdeck.com/assets/embed.js"></script>


<h2>Code</h2>

<p><a href="https://github.com/kouphax/monotouch-samples-ndc2012">https://github.com/kouphax/monotouch-samples-ndc2012</a></p>

<h2>Description</h2>

<p>MonoTouch allows you to harness all those C# skills and most of those handy .NET/Mono libraries to create truly native apps for iOS with a sprinkle of cross-platform support. But why not just use objective-c you cry? Choice is nice, so is C# and so is the range of libraries available for mono!</p>

<p>In this talk I will dive in to what makes MonoTouch so compelling for .NET developers wanting to break into iOS development and even how these skills can be harnessed to create cross platform native applications for iOS, Android and WP7 through a shared codebase.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mobile, How Do I Develop Thee? Let Me Count the Ways (Long Version)]]></title>
    <link href="http://yobriefca.se/blog/2012/06/07/mobile/"/>
    <updated>2012-06-07T21:36:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/06/07/mobile</id>
    <content type="html"><![CDATA[<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="4fcf26728a589b001f0040e8" data-ratio="1.3333333333333333" src="http://yobriefca.se//speakerdeck.com/assets/embed.js"></script>


<h2>Description</h2>

<p>Mobile development is a bit like writing web apps back in the browser war days - full of decision anxiety, volatility and platform specific issues. There is no one true answer yet most people think there should be. This talk will cover the popular(ish) options from native all the way to web solutions (and all the mashup magic in-between). Oh yes and some opinion as well.</p>

<p>This is the longer more up to date version of the previous talk.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[5 Years]]></title>
    <link href="http://yobriefca.se/blog/2012/05/26/5-years/"/>
    <updated>2012-05-26T22:11:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/05/26/5-years</id>
    <content type="html"><![CDATA[<p>So I am sitting here, here being London - 315(ish) miles away from my family, halfway through the <a href="http://nhshackday.com">NHS Hack Day</a> and having a bit of a personal crisis.  I often have these little episodes but this one has been languishing in my dusty old head for a good while - refusing to go away, nagging me every time I have a chance to ponder things.  It&#8217;s the same old thing - why am I doing any of this stuff I do?  I don&#8217;t generally get a great amount of opportunity in work to really stretch my creative urges.  That sort of thing happens on my own time and therefore given my other responsibilities (my wife, family and lifes associated activities) is done under a fairly tight deadline.  Add this to the fact I bore easily of things that aren&#8217;t really benefiting people immediately - I tend to flit, easily, between little unfinished projects.  But wait&#8230;.  I did it again.  You see back there, about 2 sentences ago I just sidelined my entire life.  Thrown between two looming brackets I relegated my wife and family to a byline yet again.  Oy vey.</p>

<p>And this brings me, neatly enough, to the point of this entire ramble.</p>

<p>Five years ago I married my awesome wife and in that time I&#8217;ve done a heap of things - relocated twice, had two kids bought a house, got promoted, pissed everyone off, seen a few countries and bought/traded three cars (which get smaller every time oddly enough).  And through all this hopping around my wife has been the one true constant.  She thinks, most of the time, I don&#8217;t care about her - after all I&#8217;m in London participating in a hackathon on our 5th wedding anniversary because I stupidly didn&#8217;t put two and two together and notice the clash.  So yeah it may damn well seem like she comes in a close second to my hobby/career stuff (you know the stuff I already mentioned was pulling into crisis mode).  But it&#8217;s not true.  I can&#8217;t help the fact I am &#8220;emotionally retarded&#8221;, as my sister once called it, but perhaps once in a while I really should let her know that she means more than she thinks she does.  And here it is.  A little bit of emotional letting if you will.</p>

<p>Dear Emma - happy anniversary, I hope we have plenty more, thank you for putting up with me, you&#8217;re aces.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Starter for 10 - Scala, Play 2 and Mongo]]></title>
    <link href="http://yobriefca.se/blog/2012/05/08/starter-for-10-scala/"/>
    <updated>2012-05-08T07:26:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/05/08/starter-for-10-scala</id>
    <content type="html"><![CDATA[<p>This post is going to cover the whole &#8220;getting up an running&#8221; for a simple Scala stack - namely Scala, Play 2 and Mongo.  2012 has been the year of the polyglot for me.  I&#8217;ve been working on projects with .NET, Node.js, Ruby and Scala in the mix.  I&#8217;ve seen how Rails can really boost developer productivity (compared to the likes of ASP.NET MVC or other, less opinionated, frameworks) but I must say - In terms of developer productivity, at least for me, nothing has come close to the Scala/Play/Mongo combo.  I hadn&#8217;t touched functional programming since SML in university but I found Scala allowed me to express myself in a very terse manner.  Combine that with Play and its straightforward, uncomplicated approach to building web apps and Mongo with its schemaless nature then its productivity++ all the way.</p>

<p>It&#8217;s worth pointing out right away that James Ward already has a <a href="http://www.jamesward.com/2012/02/21/play-framework-2-with-scala-anorm-json-coffeescript-jquery-heroku">similar post</a> and a <a href="https://github.com/jamesward/play2torial/blob/master/JAVA.md">(currently Java only) tutorial</a>.  These are  much better but they dont cover the Mongo/Caabah/Salat side of things (not that it is particularly difficult) so at least I&#8217;ve got a leg to stand on.</p>

<h2>Installing</h2>

<blockquote><p>Versions used in this post</p>

<ul>
<li>Scala (2.9.1)</li>
<li>Play (2.0.1)</li>
<li>Mongo (2.0.4)</li>
</ul>
</blockquote>

<p>I&#8217;m going to assume that you are capable of installing software (by following basic instructions) so I won&#8217;t waste your time covering this.  Here are some links to kick you off,</p>

<ul>
<li><a href="http://www.scala-lang.org/downloads">Scala</a></li>
<li><a href="http://www.playframework.org/download">Play 2</a> (it just goes on your <code>PATH</code>)</li>
<li><a href="http://www.mongodb.org/downloads">Mongo</a></li>
</ul>


<p>Alternatively if you are on OSX - <a href="http://mxcl.github.com/homebrew/">Homebrew</a> has got everything you need at the time of putting this together.</p>

<h2>Generating your Application</h2>

<p>Play is a command line tool and can be used to generate your basic app skeleton,</p>

<pre><code>play new &lt;project name&gt;
</code></pre>

<p>Just fill in the project name and you will be guided through the basic generation of the project, e.g.</p>

<pre><code>→ play new sampleapp                                              
       _            _ 
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/ 

play! 2.0.1, http://www.playframework.org

The new application will be created in /Users/kouphax/Projects/temp/sampleapp

What is the application name? 
&gt; sampleapp

Which template do you want to use for this new application? 

  1 - Create a simple Scala application
  2 - Create a simple Java application
  3 - Create an empty project

&gt; 1

OK, application sampleapp is created.

Have fun!
</code></pre>

<p>Indeed - fun you shall have.</p>

<h2>Dependencies</h2>

<p>Working with Mongo directly is all well and good but it can be made a bit simpler with a few dependencies.  Namely <a href="http://api.mongodb.org/scala/casbah/2.0/">Casbah</a> and <a href="https://github.com/novus/salat">Salat</a>.  Casbah is the official Scala Toolkit for MongoDB and Salat allows you to map to and from the generic Mongo object classes into more concrete case classes.</p>

<p>To add the dependencies you need to update the <code>Build.scala</code> file in the generated <code>project</code> directory.  Firstly you need to update the <code>appDependencies</code> to create the dependency on the new two libraries,</p>

<pre><code>val appDependencies = Seq(
  "com.mongodb.casbah" %% "casbah" % "2.1.5-1",
  "com.novus" %% "salat-core" % "0.0.8-SNAPSHOT"
)
</code></pre>

<p>Then you&#8217;ll need to add the <code>resolvers</code> to the <code>main</code> project declaration,</p>

<pre><code> val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings
   resolvers ++= Seq(
     "repo.novus snaps" at "http://repo.novus.com/snapshots/")
 )
</code></pre>

<p>And thats the project set up with all its dependencies ready to hack on.  So lets drive a spike through this stack and see what it looks like shall we?  Yes why not, tallyho old bean!</p>

<h2>The Model &amp; Data Access</h2>

<p>First things first lets create our model.  So we are going to write a very basic registration app.  People &#8220;register&#8221; on the site, for fun or something, I dunno as our stakeholders - I just write the code.</p>

<p>Our model is super simple,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">case</span> <span class="k">class</span> <span class="nc">Registration</span><span class="o">(</span>
</span><span class='line'>  <span class="n">username</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span>
</span><span class='line'>  <span class="n">password</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span>
</span><span class='line'>  <span class="n">confirm</span><span class="k">:</span>  <span class="kt">String</span><span class="o">,</span>
</span><span class='line'>  <span class="n">realName</span><span class="k">:</span> <span class="kt">String</span>
</span><span class='line'><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now to the interesting part.  To persist this in a Mongo data store we need to make use of the two libraries we imported previously,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">import</span> <span class="nn">com.mongodb.casbah.Imports._</span>
</span><span class='line'><span class="k">import</span> <span class="nn">com.novus.salat._</span>
</span><span class='line'><span class="k">import</span> <span class="nn">com.novus.salat.global._</span>
</span><span class='line'>
</span><span class='line'><span class="k">object</span> <span class="nc">Registrations</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">val</span> <span class="n">registrations</span> <span class="k">=</span> <span class="nc">MongoConnection</span><span class="o">()(</span><span class="s">&quot;sampleapp&quot;</span><span class="o">)(</span><span class="s">&quot;registrations&quot;</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">all</span> <span class="k">=</span> <span class="n">registrations</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">grater</span><span class="o">[</span><span class="kt">Registration</span><span class="o">].</span><span class="n">asObject</span><span class="o">(</span><span class="n">_</span><span class="o">)).</span><span class="n">toList</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">create</span><span class="o">(</span><span class="n">registration</span><span class="k">:</span> <span class="kt">Registration</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">registrations</span> <span class="o">+=</span> <span class="n">grater</span><span class="o">[</span><span class="kt">Registration</span><span class="o">].</span><span class="n">asDBObject</span><span class="o">(</span><span class="n">registration</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>First things first we create a connection using the <code>MongoConnection</code> class and grabs the <code>registrations</code> collection from the <code>sampleapp</code> store.  Now it&#8217;s worth noting that provided Mongo is up and running we don&#8217;t actually need to create either the store or the collection - the act of acting on a collection is enough to create both.</p>

<p>Next up I defined two methods <code>all</code> and <code>create</code>.</p>

<ul>
<li><code>all</code> simply pulls out all the collection data using Casbah, performs a map over the collection (which is a collection of <code>MongoDBObject</code>/<code>DBObject</code>s) and uses the <code>grater</code> object provided by Salat to map from these generic objects to our <code>Registration</code> case class.</li>
<li><code>create</code> simply adds an element (cast from a <code>Registration</code> class to an acceptable <code>DBObject</code>) to the collection.</li>
</ul>


<p>Now isn&#8217;t that a nice terse data access layer?  Yes it is.  You want to make changes?  Go ahead - the fear of change is gone or much reduced compared to the typical approach.</p>

<h2>Controllers</h2>

<p>Next up we want to add a register controller and update the existing <code>Application</code> controller.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">request</span> <span class="k">=&gt;</span>
</span><span class='line'>    <span class="nc">Ok</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="nc">Registrations</span><span class="o">.</span><span class="n">all</span><span class="o">))</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The only difference here is the <code>Registrations.all</code> so we can list the registrations in the UI.  Lets jump over the the register controller</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">Register</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">registrationForm</span> <span class="k">=</span> <span class="nc">Form</span><span class="o">(</span>
</span><span class='line'>    <span class="n">mapping</span><span class="o">(</span>
</span><span class='line'>      <span class="s">&quot;username&quot;</span> <span class="o">-&gt;</span> <span class="n">nonEmptyText</span><span class="o">,</span>
</span><span class='line'>      <span class="s">&quot;password&quot;</span> <span class="o">-&gt;</span> <span class="n">nonEmptyText</span><span class="o">,</span>
</span><span class='line'>      <span class="s">&quot;confirm&quot;</span> <span class="o">-&gt;</span> <span class="n">nonEmptyText</span><span class="o">,</span>
</span><span class='line'>      <span class="s">&quot;realName&quot;</span> <span class="o">-&gt;</span> <span class="n">text</span>
</span><span class='line'>    <span class="o">)(</span><span class="nc">Registration</span><span class="o">.</span><span class="n">apply</span><span class="o">)(</span><span class="nc">Registration</span><span class="o">.</span><span class="n">unapply</span><span class="o">)</span>
</span><span class='line'>      <span class="n">verifying</span><span class="o">(</span><span class="s">&quot;Passwords must match&quot;</span><span class="o">,</span> <span class="n">fields</span> <span class="k">=&gt;</span> <span class="n">fields</span> <span class="k">match</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="nc">Registration</span><span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">confirmation</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">password</span><span class="o">.</span><span class="n">equals</span><span class="o">(</span><span class="n">confirmation</span><span class="o">)</span>
</span><span class='line'>      <span class="o">})</span>
</span><span class='line'>  <span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">request</span> <span class="k">=&gt;</span>
</span><span class='line'>    <span class="nc">Ok</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">register</span><span class="o">(</span><span class="n">registrationForm</span><span class="o">))</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">register</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span> <span class="k">implicit</span> <span class="n">request</span> <span class="k">=&gt;</span>
</span><span class='line'>    <span class="n">registrationForm</span><span class="o">.</span><span class="n">bindFromRequest</span><span class="o">.</span><span class="n">fold</span><span class="o">(</span>
</span><span class='line'>      <span class="n">form</span> <span class="k">=&gt;</span> <span class="nc">BadRequest</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">register</span><span class="o">(</span><span class="n">form</span><span class="o">)),</span>
</span><span class='line'>      <span class="n">registration</span> <span class="k">=&gt;</span> <span class="o">{</span>
</span><span class='line'>        <span class="nc">Registrations</span><span class="o">.</span><span class="n">create</span><span class="o">(</span><span class="n">registration</span><span class="o">)</span>
</span><span class='line'>        <span class="nc">Redirect</span><span class="o">(</span><span class="n">routes</span><span class="o">.</span><span class="nc">Application</span><span class="o">.</span><span class="n">index</span><span class="o">()).</span><span class="n">flashing</span><span class="o">(</span><span class="s">&quot;message&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;User Registered!&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>OK thats a lot to take in so lets break it down a bit.</p>

<h3>The Form</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">registrationForm</span> <span class="k">=</span> <span class="nc">Form</span><span class="o">(</span>
</span><span class='line'>  <span class="n">mapping</span><span class="o">(</span>
</span><span class='line'>    <span class="s">&quot;username&quot;</span> <span class="o">-&gt;</span> <span class="n">nonEmptyText</span><span class="o">,</span>
</span><span class='line'>    <span class="s">&quot;password&quot;</span> <span class="o">-&gt;</span> <span class="n">nonEmptyText</span><span class="o">,</span>
</span><span class='line'>    <span class="s">&quot;confirm&quot;</span> <span class="o">-&gt;</span> <span class="n">nonEmptyText</span><span class="o">,</span>
</span><span class='line'>    <span class="s">&quot;realName&quot;</span> <span class="o">-&gt;</span> <span class="n">text</span>
</span><span class='line'>  <span class="o">)(</span><span class="nc">Registration</span><span class="o">.</span><span class="n">apply</span><span class="o">)(</span><span class="nc">Registration</span><span class="o">.</span><span class="n">unapply</span><span class="o">)</span>
</span><span class='line'>    <span class="n">verifying</span><span class="o">(</span><span class="s">&quot;Passwords must match&quot;</span><span class="o">,</span> <span class="n">fields</span> <span class="k">=&gt;</span> <span class="n">fields</span> <span class="k">match</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">case</span> <span class="nc">Registration</span><span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="n">password</span><span class="o">,</span> <span class="n">confirmation</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">password</span><span class="o">.</span><span class="n">equals</span><span class="o">(</span><span class="n">confirmation</span><span class="o">)</span>
</span><span class='line'>    <span class="o">})</span>
</span><span class='line'><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The Form concept in Play is a bit like a ViewModel of sorts.  It defines validation and mapping rules and allows you to pass a structured object between the controller and the view (inluding error information etc.).  In fact you aren&#8217;t even obliged to bind this to a class, they can exists as themselves.  My example above shows you how to bind to and from our <code>Registration</code> class as well as some field and crossfield/global validation.</p>

<h3>Model Binding</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">registrationForm</span><span class="o">.</span><span class="n">bindFromRequest</span><span class="o">.</span><span class="n">fold</span><span class="o">(</span>
</span><span class='line'>  <span class="n">form</span> <span class="k">=&gt;</span> <span class="nc">BadRequest</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">register</span><span class="o">(</span><span class="n">form</span><span class="o">)),</span>
</span><span class='line'>  <span class="n">registration</span> <span class="k">=&gt;</span> <span class="o">{</span>
</span><span class='line'>    <span class="nc">Registrations</span><span class="o">.</span><span class="n">create</span><span class="o">(</span><span class="n">registration</span><span class="o">)</span>
</span><span class='line'>    <span class="nc">Redirect</span><span class="o">(</span><span class="n">routes</span><span class="o">.</span><span class="nc">Application</span><span class="o">.</span><span class="n">index</span><span class="o">()).</span><span class="n">flashing</span><span class="o">(</span>
</span><span class='line'>      <span class="s">&quot;message&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;User Registered!&quot;</span>
</span><span class='line'>    <span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This little functional approach allows us to bind a request to our <code>registrationForm</code> and react to invalid input.  In the case of an invalid bind the first argument into <code>fold</code> is executed which returns a bad request with an instance of the form.  In the case of the happy path we simply push our <code>registration</code> instance into the data store and redirect to the <code>index</code> action along with a flash message.</p>

<h3>Flash</h3>

<p>Flash is like a carefully curated session variable that exists only for the next request.  This allows you to pass messages or some very transient data between requests.  This is also accessible in the view which is handy.</p>

<h2>Routes</h2>

<p>Routes in Play are written into the <code>config/routes</code> file and this is used as a basis to generate reverse routes (this gives is us statically typed routes via the <code>routes</code> object).</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">#</span> <span class="nc">Routes</span>
</span><span class='line'><span class="k">#</span> <span class="nc">This</span> <span class="n">file</span> <span class="n">defines</span> <span class="n">all</span> <span class="n">application</span> <span class="n">routes</span> <span class="o">(</span><span class="nc">Higher</span> <span class="n">priority</span> <span class="n">routes</span> <span class="n">first</span><span class="o">)</span>
</span><span class='line'><span class="k">#</span> <span class="o">~~~~</span>
</span><span class='line'>
</span><span class='line'><span class="k">#</span> <span class="nc">Home</span> <span class="n">page</span>
</span><span class='line'><span class="nc">GET</span>     <span class="o">/</span>                           <span class="n">controllers</span><span class="o">.</span><span class="nc">Application</span><span class="o">.</span><span class="n">index</span>
</span><span class='line'><span class="nc">GET</span>     <span class="o">/</span><span class="n">register</span>                   <span class="n">controllers</span><span class="o">.</span><span class="nc">Register</span><span class="o">.</span><span class="n">index</span>
</span><span class='line'><span class="nc">POST</span>    <span class="o">/</span><span class="n">register</span>                   <span class="n">controllers</span><span class="o">.</span><span class="nc">Register</span><span class="o">.</span><span class="n">register</span>
</span><span class='line'>
</span><span class='line'><span class="k">#</span> <span class="nc">Map</span> <span class="n">static</span> <span class="n">resources</span> <span class="n">from</span> <span class="n">the</span> <span class="o">/</span><span class="n">public</span> <span class="n">folder</span> <span class="n">to</span> <span class="n">the</span> <span class="o">/</span><span class="n">assets</span> <span class="nc">URL</span> <span class="n">path</span>
</span><span class='line'><span class="nc">GET</span>     <span class="o">/</span><span class="n">assets</span><span class="cm">/*file               controllers.Assets.at(path=&quot;/public&quot;, file)</span>
</span></code></pre></td></tr></table></div></figure>


<p>So I added two new routes for register that allows us to view and submit our registration form.</p>

<h2>The Views</h2>

<p>Right lets do something a little neat - remember I mentioned James Ward earlier?  Well he curates a little project called <a href="http://webjars.github.com">webjars</a> which allows us to add client side resources as managed dependencies to our project.  So lets prettify our UI with a bit of <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a> love.</p>

<p>First thing we want to do is update our <code>Build.scala</code> file with webjars resolver and our bootstrap dependency</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">appDependencies</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span>
</span><span class='line'>  <span class="s">&quot;com.github.twitter&quot;</span> <span class="o">%</span>  <span class="s">&quot;bootstrap&quot;</span>  <span class="o">%</span> <span class="s">&quot;2.0.2&quot;</span><span class="o">,</span>
</span><span class='line'>  <span class="c1">// other deps...</span>
</span><span class='line'><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">val</span> <span class="n">main</span> <span class="k">=</span> <span class="nc">PlayProject</span><span class="o">(</span><span class="n">appName</span><span class="o">,</span> <span class="n">appVersion</span><span class="o">,</span> <span class="n">appDependencies</span><span class="o">,</span> <span class="n">mainLang</span> <span class="k">=</span> <span class="nc">SCALA</span><span class="o">).</span><span class="n">settings</span><span class="o">(</span>
</span><span class='line'>  <span class="n">resolvers</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
</span><span class='line'>    <span class="s">&quot;webjars&quot;</span>          <span class="n">at</span> <span class="s">&quot;http://webjars.github.com/m2&quot;</span><span class="o">,</span>
</span><span class='line'>    <span class="c1">// other resolvers...</span>
</span><span class='line'>  <span class="o">)</span>
</span><span class='line'><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then in our <code>main.scala.html</code> we can reference the bootstrap assets in the normal way,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">media=</span><span class="s">&quot;screen&quot;</span> <span class="na">href=</span><span class="s">&quot;@routes.Assets.at(&quot;</span><span class="na">stylesheets</span><span class="err">/</span><span class="na">bootstrap</span><span class="err">.</span><span class="na">min</span><span class="err">.</span><span class="na">css</span><span class="err">&quot;)&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Index (index.scala.html)</h3>

<p>Here we simply list the current registered people,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>@(registrations: List[Registration])(implicit flash: Flash)
</span><span class='line'>@main(&quot;Super Simple Sample&quot;) {
</span><span class='line'>  @if(flash.data.contains(&quot;message&quot;)){
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;alert alert-success&quot;</span><span class="nt">&gt;</span>@flash.get(&quot;message&quot;)<span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  }
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;@routes.Register.index&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-primary&quot;</span><span class="nt">&gt;</span>Register<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>  <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">&quot;table table-bordered&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;thead&gt;</span>
</span><span class='line'>      <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;th&gt;</span>Username<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>        <span class="nt">&lt;th&gt;</span>Real Name<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/thead&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tbody&gt;</span>
</span><span class='line'>      @registrations.map { registration =&gt;
</span><span class='line'>        <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;</span>@registration.username<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;</span>@registration.realName<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>      }
</span><span class='line'>    <span class="nt">&lt;/tbody&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/table&gt;</span>
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>The interesting thing about Play 2 views is that they are just Scala.  Yep neat.  In fact any .NETters will feel quite at home as they are reminiscent of Razor views too.</p>

<h3>Register (register.scala.html)</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>@(registrationForm: Form[models.Registration])(implicit flash: Flash)
</span><span class='line'>
</span><span class='line'>@import play.api.i18n._
</span><span class='line'>@import views.html.helper._
</span><span class='line'>
</span><span class='line'>@input(field: Field, label: String, fieldType: Symbol = &#39;text) = {
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;control-group @if(field.hasErrors) {error}&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;control-label&quot;</span> <span class="na">for=</span><span class="s">&quot;@field.id&quot;</span><span class="nt">&gt;</span>@label<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;controls&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;@fieldType.name&quot;</span> <span class="na">value=</span><span class="s">&quot;@field.value&quot;</span> <span class="na">name=</span><span class="s">&quot;@field.id&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      @if(field.hasErrors){
</span><span class='line'>        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;help-inline&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          @Messages(field.error.head.message)
</span><span class='line'>        <span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      }
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>@main(&quot;Super Simple Sample&quot;) {
</span><span class='line'>  @form(action = routes.Register.register, &#39;class -&gt; &quot;form-horizontal&quot;) {
</span><span class='line'>    <span class="nt">&lt;fieldset&gt;</span>
</span><span class='line'>      <span class="nt">&lt;legend&gt;</span>Registration<span class="nt">&lt;/legend&gt;</span>
</span><span class='line'>      @registrationForm.globalError.map { error =&gt;
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;row&#39;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;alert alert-error&quot;</span><span class="nt">&gt;</span>@error.message<span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      }
</span><span class='line'>      @input(registrationForm(&quot;name&quot;), &quot;Username&quot;)
</span><span class='line'>      @input(registrationForm(&quot;password&quot;), &quot;Password&quot;, &#39;password)
</span><span class='line'>      @input(registrationForm(&quot;confirm&quot;), &quot;Confirm Password&quot;, &#39;password)
</span><span class='line'>      @input(registrationForm(&quot;realName&quot;), &quot;Real Name&quot;)
</span><span class='line'>    <span class="nt">&lt;/fieldset&gt;</span>
</span><span class='line'>    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span> <span class="na">value=</span><span class="s">&quot;Register&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  }
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>You can see from the source there that I&#8217;ve crafted my own helper function to keep things nice and DRY and avoid having to write out the twitter bootstrap required structure over and over.</p>

<h2>Running and Wrap Up</h2>

<p>Right about now the solution is done so with a simple <code>play run</code> you should be able to register and view current registrations.  Excellent.  If you want to skip everything and just get my code you can clone the <a href="https://github.com/kouphax/scala-sampleapp">Github Repo</a>.</p>

<p>OK so it&#8217;s not the most useful app in the world - that was never the intention.  But look at the code - it&#8217;s very terse and the time required to write this post was considerably more than the time required to implement the solution.  Joy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Little Sacrifices]]></title>
    <link href="http://yobriefca.se/blog/2012/04/29/the-little-sacrifices/"/>
    <updated>2012-04-29T23:24:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/29/the-little-sacrifices</id>
    <content type="html"><![CDATA[<p>Late night ramblings&#8230;</p>

<p>Productivity can plateau very quickly - especially in a technical process.  No matter how good you get at the process or approach, if you keep doing the same thing you can only get so good at it or do it so fast.  It&#8217;s possible, however, by sacrificing some of your precious time to go beyond that plateau.  There are things we, the developers, do as part of our development process that are so small and insignificant that we do them without thinking</p>

<ul>
<li>Clearing down the values in LocalStorage when debugging a web app</li>
<li>Copying assets from one folder to another (aka the macgyver deploy)</li>
<li>Navigating to <code>http://localhost:8000</code> or <code>9000</code> or some other port</li>
<li>Typing <code>rake generate preview</code> into the terminal about 20 times an hour</li>
<li>These are but a few things I&#8217;ve had to consider today alone</li>
</ul>


<p>Generally these things are so small we&#8217;d just do them by hand, right?  But if you take the time to automate these processes or even just refine them in some way it can do wonders for you productivity going forward.</p>

<p>For example the clearing of LocalStorage in Chrome - spent a few minutes writing a bookmarklet that you can execute with 1 click.  The macgyver deploy?  Write a rake/make/jake/psake/cake task for it.  Better yet use <a href="https://github.com/guard/guard">Guard</a> or <a href="https://github.com/mynyml/watchr">Watchr</a> and perform the deploy on save!  Navigatin to various different localhost ports?  Try my <a href="http://yobriefca.se/blog/2012/04/03/alfred-hack-for-web-developers/">alfred script</a> to minimise the keystrokes. <code>rake generate preview</code> - alias that bad boy to <code>rgp</code>!  Save yourself those extra keystrokes - you might need them later.</p>

<p>Listen - specifics aren&#8217;t important here.  You&#8217;ll have your own small repetitive tasks and you&#8217;ll be able to find your own ways to automate, improve or refine them - but this is the point.  You probably don&#8217;t.  At least not as often as you should.  Losing a second here and there on one task means very little in the small.  In the large, across many of these tasks, well thats a different story.  It&#8217;s hard to justify spending 10 or 20 minutes on something to automate a task that takes 5 seconds to run but even if the time doesn&#8217;t repay for a while then the fact you have less of a cognitive shift between your primary task and this secondary one should allow you stay in the highly effective, productive mindset to get the job done.</p>

<p>So give it a go, even as a thought experiment - think about the habitual development tasks you do and how you could automate them - you could well suprise yourself (like I have been recently).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Strapping Young Lad v0.1.2 Released]]></title>
    <link href="http://yobriefca.se/blog/2012/04/20/strapping-young-lad-v0-dot-1-2-released/"/>
    <updated>2012-04-20T21:36:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/20/strapping-young-lad-v0-dot-1-2-released</id>
    <content type="html"><![CDATA[<p>I have just released version 0.1.2 of <a href="https://github.com/kouphax/strapping-young-lad">Strapping Young Lad</a>.  Now we are getting to something that works a bit better across different platforms (now I just have to prove it to you).  This release sees the inclusion of multiple token replacement.  For example if I create a <code>.ladconfig</code> in the source repo with an array of tokens</p>

<pre><code>token: ['__NAME__', '__NAMESPACE__', '__AUTHOR__']
</code></pre>

<p>The user will be prompted to specify the values for these tokens before the engine goes off and does the replacement.  The <code>__NAME__</code> token is a bit special - you still need to specify the project name as part of the command line call so if SYL come across this token in the the list of configured tokens it will allow you to default that value without having to type it again, e.g.</p>

<pre><code>lad git@github.com:strapping-young-lad/Loam.git laddy

  Cloning git repository                OK
  Loading configuration                 OK
  Parsing tokens and stuff              
    name (laddy): 
    namespace: test.lad
    author: kouphax
                                        OK
  Processing files                      OK
  Processing directories                OK
  Moving project files                  OK

  Done processing 137 file(s)
  Done processing 22 directories(s)
</code></pre>

<p>Notice I didn&#8217;t need to specify the name of the project again and then I was prompted for the second and third token values.  Simple stuff.</p>

<h2>Next up</h2>

<p>So there are a few outstanding efforts to go in now.  Namely push some more templates into the SYL repo and spin up a site that lets you search said templates and document all the little features of SYL.  They will come in time.</p>

<p>This is the life!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Infoshare 2012 Talk]]></title>
    <link href="http://yobriefca.se/blog/2012/04/20/infoshare-2012-talk/"/>
    <updated>2012-04-20T14:52:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/20/infoshare-2012-talk</id>
    <content type="html"><![CDATA[<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="4f911c9791b203001f00cc2b" data-ratio="1.3333333333333333" src="http://yobriefca.se//speakerdeck.com/assets/embed.js"></script>




<iframe src="http://player.vimeo.com/video/41132110?title=0&amp;byline=0&amp;portrait=0" width="500" height="275" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<h2>Resources</h2>

<p>I mentioned a lot of technologies during my talk so here are the ones I mentioned</p>

<h3>Web Frameworks</h3>

<ul>
<li><a href="http://jquerymobile.com/">jQuery Mobile</a></li>
<li><a href="http://www.sencha.com/products/touch">Sencha Touch</a></li>
</ul>


<h3>Design</h3>

<ul>
<li><a href="http://codiqa.com/">Codiqa</a></li>
<li><a href="http://www.sencha.com/products/architect/">Sencha Architect 2</a></li>
</ul>


<h3>Web Containers</h3>

<ul>
<li><a href="http://phonegap.com/">Phonegap</a></li>
<li><a href="http://incubator.apache.org/cordova/">Cordova</a></li>
</ul>


<h3>Cross Platform</h3>

<ul>
<li><a href="http://xamarin.com/monotouch">Monotouch</a></li>
<li><a href="http://xamarin.com/monoforandroid">Monodroid</a></li>
<li><a href="http://www.anscamobile.com/corona/">Corona</a></li>
<li><a href="https://build.phonegap.com/">Phonegap:Build</a></li>
<li><a href="http://www.appcelerator.com/platform/titanium-sdk">Titanium</a></li>
</ul>


<h3>Server Platforms</h3>

<ul>
<li><a href="https://parse.com/">Parse</a></li>
<li><a href="http://www.kinvey.com/">Kinvey</a></li>
</ul>


<h3>Cloud Services</h3>

<ul>
<li><a href="http://www.flurry.com/">Flurry</a></li>
<li><a href="http://urbanairship.com/">Urban  Airship</a></li>
</ul>


<h3>Testing &amp; Debugging</h3>

<ul>
<li><a href="http://pivotal.github.com/jasmine/">Jasmine</a></li>
<li><a href="https://www.lesspainful.com/">Less Painful</a></li>
<li><a href="http://www.testingwithfrank.com/">Frank</a></li>
<li><a href="http://people.apache.org/~pmuellr/weinre/">Weinre</a></li>
</ul>


<h3>Beta Testing</h3>

<ul>
<li><a href="https://testflightapp.com/">Testflight</a></li>
<li><a href="http://www.hockeyapp.net/">Hockey</a></li>
</ul>


<h2>Comments</h2>

<p>So how did it go?  From my perspective it could have been better - I&#8217;m not sure why started &#8220;ummmmming&#8221; all the time - I had plenty to say (and I think I talked too fast as well).  I just started in a semi-flustered state for reasons unknown.  I seen a few decent comments on twitter so I guess it was fairly well received thats what matters.  If anyone has any other observations, no matter how harsh, let me know.</p>

<p>One more note - Gdasnk is awesome - the technical people are so engaged and enthusiastic, the place itself is really interesting and I managed try my new favourite shot - <a href="http://www.drinksmixer.com/drink10324.html">Mad Dog</a>.  Thanks for the opportunity Gdasnk and Infoshare.  Hopefully I can back here and spend more time in the city soon.</p>

<p>Na zdrowie</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Strapping Young Lad - Project Template Token Replacer and Bootstrapper]]></title>
    <link href="http://yobriefca.se/blog/2012/04/17/strapping-young-lad-project-template-token-replacer-and-bootstrapper/"/>
    <updated>2012-04-17T22:08:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/17/strapping-young-lad-project-template-token-replacer-and-bootstrapper</id>
    <content type="html"><![CDATA[<p>Today I have released the super simple, rough-as-hell, barely <a href="http://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a> <a href="https://rubygems.org/gems/lad">Strapping Young Lad</a>(<a href="https://github.com/kouphax/strapping-young-lad">Source</a>).  It&#8217;s fulfils a need I keep having but never really fixing.</p>

<h2>Evelvator Pitch</h2>

<p>SYL, or lad for short, will take a git repo, clone it and replace a bunch of tokens in it with the values you&#8217;ve supplied.</p>

<h2>Say Wha?</h2>

<p>This means you can create a bunch of base solution/project types for any language and SYL will simply do some basic file/folder renaming and file content replacing for a given token.  For example doing the following,</p>

<pre><code>lad /path/to/git/repo MyNewProject
</code></pre>

<p>Will do the following things,</p>

<ol>
<li>Clone the repo at <code>path/to/git/repo</code> into a temporary folder</li>
<li>Remove the <code>.git</code> folder from the repo</li>
<li>Check for the existence of a <code>.ladconfig</code> in the freshly cloned repo</li>
<li>If one exists it loads the config setting</li>
<li>Otherwise it falls back to the defaults</li>
<li>Replace all instances of the configured token (eg. <code>__NAME__</code>) in all files, directories and file contents with the project name (in our case <code>MyNewProject</code>)</li>
<li>Copy the new folder over to your current working directory (<code>./MyNewProject</code>)</li>
</ol>


<p>What this allows you to do is have a standard project template for pretty much anything (.NET, Ruby, Scala - listen I mean anything - if it a collection of folders and files in a git repo then you set) and create a new instance with a few keystrokes - saving you time and potential RSI.</p>

<p>SYL was inspired by <a href="https://github.com/chucknorris/warmup">WarmuP</a> which is itself a gem but it requires you to be running .NET which for a lot of my requirement isn&#8217;t going to cut it.</p>

<p>If you want to see what a typical template project looks like try <a href="https://github.com/amirrajan/Loam">Amir&#8217;s Loam repo</a>.  This is a WarmuP project but works just fine.  With SYL you can create a <code>.ladconfig</code> file to override some of the conventions - get the source README linked above.</p>

<h2>Whats Next</h2>

<p>Yep it&#8217;s pretty damn basic right now but it satifies most of my needs right now.  There are a few things I want to add for myself but I didn&#8217;t release this for ME, I am pretty sure this will be of use to someone in some community in some shape or form.  With that in mind here are some features I think would take this to the next level,</p>

<ol>
<li>Specifiying multiple tokens e.g. <code>__NAME__</code> and <code>__NAMESPACE__</code> and <code>__YEAR__</code> etc. etc.</li>
<li>Post processing actions (e.g. <code>bundle install</code> or <code>npm install</code> or <code>sbt compile</code> or something like that)</li>
<li>A catalog - I have a <a href="https://github.com/strapping-young-lad">github organisation</a> with no repos setup right now but this would be a brilliant place to hold a load of templates compatible with SYL, don&#8217;t ya think?  Then I could roll a site like rubygems or npmjs.org and make the projects searchable etc.  If you build it, they will come.  Maybe, who knows.</li>
</ol>


<p>So if you like it - HIGHFIVE - if not - it&#8217;s all good.  Now go break it and criticise me.</p>

<blockquote><p>So we&#8217;ll criticise him, because he can take it&#8230;. [The Dark Knight, Approx.]</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Scala - A Tragedy in Two Parts - Part 1]]></title>
    <link href="http://yobriefca.se/blog/2012/04/13/scala-a-tragedy-in-two-parts-part-1/"/>
    <updated>2012-04-13T09:06:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/13/scala-a-tragedy-in-two-parts-part-1</id>
    <content type="html"><![CDATA[<p>The tragedy being we don&#8217;t use it all the time!</p>

<p>This presentation is the first part in the 2 part series &#8220;Scala - A Tragedy in Two Parts&#8221;.  In this presentation I go fast and dive into a range of Scala code snippets pointing out some of the weird and wonderful features of the language.</p>

<h2>Recorded Session</h2>

<iframe src="http://player.vimeo.com/video/40255430?title=0&amp;byline=0&amp;portrait=0" width="500" height="375" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<p> <p><a href="http://vimeo.com/40255430">Scala - A Tragedy in Two Parts - Part 1 - The Language</a> from <a href="http://vimeo.com/kouphax">James Hughes</a> on <a href="http://vimeo.com">Vimeo</a>.</p></p>

<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="4f86b1fcd1325b0022019eea" data-ratio="1.3333333333333333" src="http://yobriefca.se//speakerdeck.com/assets/embed.js"></script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Alfred Hack for Web Developers]]></title>
    <link href="http://yobriefca.se/blog/2012/04/03/alfred-hack-for-web-developers/"/>
    <updated>2012-04-03T17:24:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/03/alfred-hack-for-web-developers</id>
    <content type="html"><![CDATA[<p>I&#8217;ve been a fan of <a href="http://www.alfredapp.com/">Alfred</a> for some time and use it to make pretty much everything a keystroke away.  I&#8217;ve thrown a very small little extension that reduces the time to jump between console and newly started web app.  Generally during development we need to run our app jump to <code>localhost:PORT</code> and make sure it&#8217;s working.  If, like me, you have a lot of different apps and platforms (Scala, Jekyll, Rails, Sinatra, Express to name a few) then <code>PORT</code> becomes the one thing you always need to type and the browsers auto predict is generally not that helpful in this situation.</p>

<p>Alfred to the rescue here, just create a script as shown below and then running alfred and typing <code>l 9000</code> you can launch your default browser at <code>http://localhost:9000</code>.  Very simple but saves me heaps of time at the minute.</p>

<p><img class="borderless" src="http://yobriefca.se/images/blog/alfredscript.png"></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails is not a gateway drug]]></title>
    <link href="http://yobriefca.se/blog/2012/04/03/rails-is-not-a-gateway-drug/"/>
    <updated>2012-04-03T13:30:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/03/rails-is-not-a-gateway-drug</id>
    <content type="html"><![CDATA[<blockquote><p>WARNING!!! - a negative opinion on Rails lies ahead.  Everything here needs to be taken with an <strong>IMHO</strong> and, if you feel so inclined, tell me to go mind my own business.</p></blockquote>

<p>I know I&#8217;m stepping into very dangerous territory here but I&#8217;ve come to the very solid conclusion that <a href="http://rubyonrails.org/">Rails</a>, Ruby&#8217;s heavily opinionated web framework, is not the gateway drug people claim.  I&#8217;ve heard the claims that if you give <a href="http://rubyonrails.org/">Rails</a> a try, coming from some other web stack on any other language, you&#8217;ll fall in love with Ruby and Rails and write a big long blog post about how you are leaving .NET (or Java or whatever) behind.  I really dont get it&#8230;. the only feeling that Rails leaves me with - having been using it in anger for about a month now - is frustration.  But before you drive rusty nails into my hands and feet let me at least explain where I am coming from.</p>

<h2>Previous attempts</h2>

<p>I&#8217;ve been binging on Ruby for the last few months but this hasn&#8217;t been my first time - it&#8217;s been my only successful time but certianly not my first.  A year previous I had given Ruby/Rails a shot and it never stuck (in fact not once but at least twice).  Coming from a predominantly .NET/ASP.NET MVC background I decided the best approach would be to cut my teeth on a medium sized web based project and therefore jumped right into Rails.  It only took a short time before the whole effort felt like a slog full of weird semi-magic behaviour.  I gave up.</p>

<h2>Doing things differently</h2>

<p>This time around I decided to do things a little differently - rather than run with a web project I just tinkered with the language and eventually tried porting a <a href="http://yobriefca.se/blog/2012/03/12/sentamentalizer/">.NET project over to Ruby</a>.  Fair bit of Ruby code and a small <a href="http://sinatrarb.com">sinatra</a> app later - it clicked.  I got the whole Ruby love affair, it was lovely and I was three lines into my <em>&#8220;F**k you .NET, you&#8217;re worse than Java and I hate you and you smell&#8221;</em> blog post (not factual!!) when I realised I needed to give Ruby more time to bed in and, out of fairness, I had to at least experience Rails.</p>

<h2>Present Day</h2>

<p>And with that I discovered that Rails had been my problem.  I find it incredibly frustrating.  I don&#8217;t want to dive into bashing Rails, thats not my intent, - I&#8217;m sure people find it really productive - but it&#8217;s not for me.  So here is a very high level executive summary of the problems I&#8217;ve had with Rails</p>

<p><strong>The Command Line Interface</strong></p>

<p>The CLI stuff has just a little bit too many features and options that make it a difficult thing to approach without extensive research.  When I watched some of the <a href="http://railscasts.com/">Railscasts</a> I found myself going &#8220;wait, HOW did he do that?&#8221; more than once.  Choice is good but surely Rails is supposed to be easy for the beginner?  Yet I feel the default options are not the ones I would have picked.  You know what - I want to be hand-held once in a while, I&#8217;m proud to admit that.</p>

<p><strong>Too Much Magic</strong></p>

<p>Rails is very heavily convention based but often there is simply too much convention and I&#8217;ve been left baffled a few times.  Some of the convention is well documented and some of it less so.  When a convention is not obvious it becomes magic and it really feels Rails has a lot of &#8220;magic&#8221;.  Thats not something I want.  To be honest I&#8217;d rather write the same 2/3 lines of boilerplate if it meant that, to a new developer, they could understand the convention better.  Take this very trivial example,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">index</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the same in ASP.NET MVC</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">HomeController</span><span class="p">:</span> <span class="n">Controller</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">public</span> <span class="n">ActionResult</span> <span class="nf">Index</span><span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nf">View</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>To me that one line <code>return View()</code> tell me that this action will return a View, and now I can infer the convention of <code>home/index.cshtml</code> that wee bit easier.  When you start adding in more conventions, a little bit of extra code makes all the difference.  Conventions don&#8217;t scale unless clearly marked IMHO.</p>

<p><strong>Bloatyness</strong></p>

<p>When you generate scaffold in a Rails app, as a typical new developer would, you end up with a awful lot of files.  If I generate a new entity for example this is what I am greeted with,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>→ rails generate scaffold MyEntity name:String age:Int                         !6580
</span><span class='line'>      invoke  active_record
</span><span class='line'>      create    db/migrate/20120403130542_create_my_entities.rb
</span><span class='line'>      create    app/models/my_entity.rb
</span><span class='line'>      invoke    test_unit
</span><span class='line'>      create      <span class="nb">test</span>/unit/my_entity_test.rb
</span><span class='line'>      create      <span class="nb">test</span>/fixtures/my_entities.yml
</span><span class='line'>       route  resources :my_entities
</span><span class='line'>      invoke  scaffold_controller
</span><span class='line'>      create    app/controllers/my_entities_controller.rb
</span><span class='line'>      invoke    slim
</span><span class='line'>      create      app/views/my_entities
</span><span class='line'>      create      app/views/my_entities/index.html.slim
</span><span class='line'>      create      app/views/my_entities/edit.html.slim
</span><span class='line'>      create      app/views/my_entities/show.html.slim
</span><span class='line'>      create      app/views/my_entities/new.html.slim
</span><span class='line'>      create      app/views/my_entities/_form.html.slim
</span><span class='line'>      invoke    test_unit
</span><span class='line'>      create      <span class="nb">test</span>/functional/my_entities_controller_test.rb
</span><span class='line'>      invoke    helper
</span><span class='line'>      create      app/helpers/my_entities_helper.rb
</span><span class='line'>      invoke      test_unit
</span><span class='line'>      create        <span class="nb">test</span>/unit/helpers/my_entities_helper_test.rb
</span><span class='line'>      invoke  assets
</span><span class='line'>      invoke    coffee
</span><span class='line'>      create      app/assets/javascripts/my_entities.js.coffee
</span><span class='line'>      invoke    scss
</span><span class='line'>      create      app/assets/stylesheets/my_entities.css.scss
</span><span class='line'>      invoke  scss
</span><span class='line'>      create    app/assets/stylesheets/scaffolds.css.scss
</span></code></pre></td></tr></table></div></figure>


<p>Don&#8217;t get me wrong - it&#8217;s nice to be given all these things for free, but it&#8217;s ultimatley stuff I end up ripping out anyway.  In .NET there is a running joke that the &#8220;Empty ASP.NET MVC Project&#8221; Template is anything but.  To me this is the same issue except it&#8217;s something that I&#8217;d have to clean up everytime I use the <code>generate scaffold</code> command.  This seems worse to me.</p>

<h2>Current Thoughts</h2>

<p>I&#8217;m not sure were Rails is supposed to stand.  I hear it&#8217;s great for beginners or for big sites but I couldn&#8217;t recommend it for either right now.  I realise I should really give it more time before rejecting it entirely but I feel that would be more time wasted.  Rails doesn&#8217;t make me more productive, at least not right now&#8230; perhaps once I repeat the same steps over and over and they become natural I&#8217;ll see a greater boost in productivity (Ruby on the other hand felt natural and great right away).  Perhaps if I shun the generators and roll my own stuff then I&#8217;ll be more productive - but then why not use another framework that comes without all the gubbins I don&#8217;t need?  Sinatra is nice and simple and I can build upon it rather than breakling it apart.  <a href="http://ramaze.net/">Ramaze</a> seems like a great &#8220;next step up&#8221; from Sinatra but without as much (perceived) bloat as Rails.  I&#8217;ve also followed the recent <a href="http://www.kickstarter.com/projects/1397300529/railsapp">Kickstarter debacle</a> from Yehuda - and I agree with him and his mission.</p>

<p>So what I am trying to say is - if you are a person wanting to give the Ruby world a fair shake - DONT start on Rails.  Start simpler and later, if you want, when you&#8217;ve been throughly sold on the Ruby way, try Rails to see what you think.  Start with Ruby, port some code, write a Sinatra app, watch the <a href="http://railscasts.com/">Railscasts</a> as they are amazing then consider immersing yourself in Rails.</p>

<h2>Educate Me</h2>

<p>Finally - educate me.  I&#8217;m not some sort of oracle proclaiming the death of a framework that thousands of people love.  I&#8217;m not going to make anyone stop and think &#8220;I&#8217;ve been doing wrong all my life - screw Rails&#8221;.  If I&#8217;m wrong - tell me.  If you think I need to give Rails another look - tell me why, tell me how.  If you care - show me what I&#8217;m missing.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting the Selected Option in a Select with Selenium in Scala]]></title>
    <link href="http://yobriefca.se/blog/2012/04/02/setting-the-selected-option-in-a-select-with-selenium-in-scala/"/>
    <updated>2012-04-02T15:21:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/04/02/setting-the-selected-option-in-a-select-with-selenium-in-scala</id>
    <content type="html"><![CDATA[<p>Almost a perfect bit of alliteration there in that title - right?  Anyway I&#8217;ve been doing a bit of work with bare-metal Selenium stuff in Scala recently and one of the things that kept me stumped for a while was setting the selected <code>option</code> for a particular <code>select</code> element.</p>

<p>I looked around the interwebs and didn&#8217;t really find anything - now I&#8217;m not saying it isn&#8217;t out there, I am certain it is, but I couldn&#8217;t find it.  So I decided to document how I did it in case any lone sole is stuck in a similar situation&#8230;</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">driver</span><span class="o">.</span><span class="n">findElement</span><span class="o">(</span><span class="nc">By</span><span class="o">.</span><span class="n">id</span><span class="o">(</span><span class="s">&quot;year&quot;</span><span class="o">)).</span>
</span><span class='line'>  <span class="n">findElements</span><span class="o">(</span><span class="nc">By</span><span class="o">.</span><span class="n">tagName</span><span class="o">(</span><span class="s">&quot;option&quot;</span><span class="o">)).</span>
</span><span class='line'>  <span class="n">get</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span>
</span><span class='line'>  <span class="n">setSelected</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>So here I am simply finding the second <code>option</code> of the &#8220;year&#8221; <code>select</code> element and setting it selected.  I know it looks obvious now but trust me I was scratching my head for an age on this one.</p>

<p>I hope it helps some one, eventually :)</p>

<div style="text-align:center">
<img src="http://imgs.xkcd.com/comics/wisdom_of_the_ancients.png">
</div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Done Spoked at DevWeek]]></title>
    <link href="http://yobriefca.se/blog/2012/03/28/done-spoked-at-devweek/"/>
    <updated>2012-03-28T13:19:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/03/28/done-spoked-at-devweek</id>
    <content type="html"><![CDATA[<p>So I made it through my talk at DevWeek which might sound a little odd but it took a whole bottle of cough syrup to do it.  Not having been sick for most of the winter my body decided a day before DevWeek to go into shut down.  I spent Tuesday in bed with very little voice.  Thankfully the head colds hold on my vocal chords relented this morning and I think I managed to project as best I could.</p>

<p>So initial thoughts of how it went?  I honestly think I&#8217;m getting better at this presenting thing so that must be a good thing, unless I was TERRIBLE before.  The 2 main annoyances that have been raised thus far have been</p>

<h2>1. Too Short</h2>

<p>I did my usual &#8220;talk really fast and finish earlier than planned&#8221; thing I sometimes do. But there was plenty of discussion afterwards which I tought was interesting.  FWIW when I present this to myself it takes longer.  My internal monologue must be slower than the way I speak.  Apologies to anyone that felt it was &#8220;too short&#8221;.</p>

<h2>2. Not enough Visual Studio</h2>

<p>I opted to play it safe end embed code into my slides rather than code live - I didn&#8217;t go unnoticed and I had a few comments that &#8220;moar codez&#8221; would have been good.  Totally agree.</p>

<h2>Other Stuff</h2>

<p>I opted to change my slide deck between submitting them for print and presenting.  I did it out of desire to devlier a better, more structured, talk (my first set being quite short as I was going for a &#8220;free-form&#8221; type of presentation).  Probably not the most professional approach to do this but at least I can say my heart was in the right place :)  Here are offending articles BTW</p>

<div style="max-width:500px;margin:0 auto;">
    <script src="http://speakerdeck.com/embed/4f719e7aca692c002101c187.js"></script>
</div>


<p>Code that was presented is available, as always, in/on my <a href="https://github.com/kouphax/bddindotnet-code">Github Repo</a>.  Thanks to all who attended and any other feedback you have throw it my way so I can get better at this talking malarky.</p>

<p>Also thanks to the folks at DevWeek for the opportunity - hopefully you&#8217;ll have me back at some point.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rbenv and CodeRunner]]></title>
    <link href="http://yobriefca.se/blog/2012/03/22/rbenv-and-coderunner/"/>
    <updated>2012-03-22T10:56:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/03/22/rbenv-and-coderunner</id>
    <content type="html"><![CDATA[<p>You know <a href="http://krillapps.com/coderunner/">CodeRunner</a> right?  If not maybe you should go check it out.  It&#8217;s and aptly named little tool for running code snippets in various languages much like what <a href="http://www.linqpad.net/">LinqPad</a> does for the .NET folks.  I&#8217;ve been using it extensivley recently to test out little Ruby and Scala snippets.  Thing is though - I hit a snag.  By default CodeRunner will run the system ruby executable (1.8 in OSX) and I generally use <a href="https://github.com/sstephenson/rbenv">rbenv</a> along with version 1.9.whatever so some of my scripts started behaving a little&#8230; odd.</p>

<p>But hey it&#8217;s an easy fix,</p>

<ul>
<li>Open your CodeRunner Preferences</li>
<li>Select the Languages tab</li>
<li>Select Ruby in the Language List</li>
<li>Change the run command from <code>ruby $filename</code> to <code>~/.rbenv/shims/ruby $filename</code></li>
</ul>


<h2>Before</h2>

<p><img class="borderless" src="http://yobriefca.se/images/blog/coderunnerruby/before.png"></p>

<h2>After</h2>

<p><img class="borderless" src="http://yobriefca.se/images/blog/coderunnerruby/after.png"></p>

<p>Blam - global rbenv version is now the goto version for CodeRunner.  OK so it won&#8217;t work with rbenv locals but I am sure you can tweak it to make it work (I haven&#8217;t needed it so never looked).</p>
]]></content>
  </entry>
  
</feed>
