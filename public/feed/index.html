<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Yo Briefcase!]]></title>
  <link href="http://yobriefca.se/feed/index.html" rel="self"/>
  <link href="http://yobriefca.se/"/>
  <updated>2013-01-21T12:00:38+00:00</updated>
  <id>http://yobriefca.se/</id>
  <author>
    <name><![CDATA[James Hughes]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[yobriefcasts: Screencasts with a JVM flavour]]></title>
    <link href="http://yobriefca.se/blog/2013/01/21/yobriefcasts-screencasts-with-a-jvm-flavour/"/>
    <updated>2013-01-21T11:03:00+00:00</updated>
    <id>http://yobriefca.se/blog/2013/01/21/yobriefcasts-screencasts-with-a-jvm-flavour</id>
    <content type="html"><![CDATA[<p>Today sees the inaugural launch of a new project/passion of mine - <a href="http://yobriefcasts.tv">yobriefcasts.tv</a>.  There is a launch post about it on the <a href="http://yobriefcasts.tv">site</a> as well as the first in a series of screencasts around Play! 2 (more being edited as you read this no doubt).  Initially I never set out to focus on the world of the JVM but after building a list of potential topics and doing some research there is just so much there and so little audio/visual coverage of it that I think it deserves some attention.</p>

<p>As it stands right now there is an [optional] price associated with the productions - you can stream everything to your hearts content or you can pay a minimal sum to get a high quality download of the screencast - you can do both if you want.  It took a while to come to an acceptable price point and structure because I have an end goal here - I want to feed any money earned back into the project to get better equipment and thusly produce better quality screencasts.  Futhermore I&#8217;d eventually like to turn this into a (mostly) full time gig and move to a subscription model with frequent (weekly) releases - but thats a long way away yet - for now I want to see if I can build something people want and enjoy.</p>

<p>But hopefully the site can speak for itself - I&#8217;ve already got an extensive list of releases coming up over the next while so stay tuned, follow us on <a href="http://twitter.com/yobriefcasts">twitter as @yobriefcasts</a> and enjoy the <a href="http://yobriefcasts.tv">site</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Trello Cards: Materialising Trello Boards]]></title>
    <link href="http://yobriefca.se/blog/2012/12/28/trello-cards-materialising-trello-boards/"/>
    <updated>2012-12-28T19:34:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/12/28/trello-cards-materialising-trello-boards</id>
    <content type="html"><![CDATA[<blockquote><p>TL;DR I ported <a href="https://github.com/psd/pivotal-cards">pivotal-cards</a> to <a href="http://yobriefca.se/trello-cards">trello-cards</a></p></blockquote>

<p>I recently did a spot of work with the awesome and brilliant people of the <a href="http://digital.cabinetoffice.gov.uk/category/gds/">Government Digital Service</a> and being big fans of getting stuff done they make use of whiteboards and index cards to visualise the flow of work on the various projects.  Thats all well and good but it makes reporting to senior managers, stakeholders and remote people a bit difficult (and for the uber paranoid - what about auditing!!!).  To that end this flow of work was also mirrored online - and in GDS&#8217;s case the tool of choice was usually <a href="http://pivotaltracker.com">Pivotal Tracker</a>.  In order to bridge the gap between the online and &#8220;real&#8221; one of the smart chaps at GDS wrote <a href="https://github.com/psd/pivotal-cards">pivotal-cards</a> which lets you generate printable index cards from you pivotal board.  Lovely stuff</p>

<p><a href="http://www.flickr.com/photos/psd/7160723862/" title="Pivotal Cards by psd, on Flickr"><img src="http://farm8.staticflickr.com/7223/7160723862_ef5d8e59a7.jpg" width="500" height="442" alt="Pivotal Cards"></a></p>

<p>Anyway - I spent some time today porting this little project to Trello.  I have been using Trello more and more on recent projects but always miss the physicality of real index cards and I&#8217;m usually strapped for time to start writing them out myself.</p>

<p>So here it is - <a href="http://yobriefca.se/trello-cards">trello-cards</a>, I&#8217;ve tried to keep it pretty much 1:1 with pivotal-cards but there are some <code>TODO</code>s still outstanding - the current card make up looks a bit like this.</p>

<p><img src="http://yobriefca.se/images/blog/cardmocks.png" /></p>

<p>So basically follow the instructions on the <a href="http://yobriefca.se/trello-cards/">project page</a> and hopefully it should all work out.  If it doesn&#8217;t - <a href="https://github.com/kouphax/trello-cards">FORK IT &#8216;N FIX IT</a> or <a href="https://github.com/kouphax/trello-cards/issues">complain</a> and I&#8217;ll fix it for you :)</p>

<p>Some other points worth noting,</p>

<ul>
<li>Currently tested on Chrome 25 (OSX)</li>
<li>Could do with some basic tests around it</li>
<li>Currently no markdown support for descriptions</li>
<li>Story points use the <a href="https://chrome.google.com/webstore/detail/jdbcdblgjdpmfninkoogcfpnkjmndgje?utm_source=chrome-ntp-icon">Trello Scrum Chrome Extension</a> convention of <code>(POINTS)</code> at the start of the card name/title.  If you use that plugin then good for you, if not you can still make use of the points convention</li>
<li>Tasks are derived from the first checklist on the card</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Eg. Play 2.1 + Scala + Guice + GlobalSettings#getControllerInstance]]></title>
    <link href="http://yobriefca.se/blog/2012/12/18/eg-play-2-dot-1-plus-scala-plus-guice-plus-globalsettings-number-getcontrollerinstance/"/>
    <updated>2012-12-18T19:27:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/12/18/eg-play-2-dot-1-plus-scala-plus-guice-plus-globalsettings-number-getcontrollerinstance</id>
    <content type="html"><![CDATA[<blockquote><p>TL;DR Here is some <a href="https://github.com/kouphax/play21guice">sample code</a> of how to use Play 2.1s GlobalSettings#getControllerInstance feature with Google Guice.</p></blockquote>

<p>I&#8217;ve had the chance to take Play 2.1 RC 1 out for a spin recently and in a bid to make my project a bit more testable I decided to go ahead and give dependency injection a bit of a spin again.  While things like the cake pattern and general dynamic composition are alright I&#8217;ve never been happy with the code that I produce using them. So I decided to give <a href="https://code.google.com/p/google-guice/">Guice</a> a blast as it seemed very much aligned with how I approached DI in the .NET world.</p>

<p>My main need was to create instances of controllers and given Plays appraoch in the past (singleton <code>object</code>s for controllers) 2.1 new <code>GlobalSettings#getControllerInstance</code> feature was what I needed.</p>

<p>First things first we need to add a project dependency to <a href="https://code.google.com/p/google-guice/">Guice</a> and while we could just add the Guice dependencies directly I went with a library that offered slightly neater syntax in Scala - <a href="https://github.com/sptz45/sse-guice">SSE-Guice</a>.  In short this means instead of writing this sort of noisy code</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">bind</span><span class="o">(</span><span class="n">classOf</span><span class="o">[</span><span class="kt">Service</span><span class="o">]).</span><span class="n">to</span><span class="o">(</span><span class="n">classOf</span><span class="o">[</span><span class="kt">ServiceImpl</span><span class="o">]).</span><span class="n">in</span><span class="o">(</span><span class="n">classOf</span><span class="o">[</span><span class="kt">Singleton</span><span class="o">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>We get to write it like this,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">bind</span><span class="o">[</span><span class="kt">Service</span><span class="o">].</span><span class="n">to</span><span class="o">[</span><span class="kt">ServiceImpl</span><span class="o">].</span><span class="n">in</span><span class="o">[</span><span class="kt">Singleton</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>So lets add the reference to the <code>Build.scala</code> file (assuming we just generated a our Play project) for sse-guice</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">appDependencies</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span>
</span><span class='line'>  <span class="n">jdbc</span><span class="o">,</span>
</span><span class='line'>  <span class="n">anorm</span><span class="o">,</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Add your project dependencies here,</span>
</span><span class='line'>  <span class="s">&quot;com.tzavellas&quot;</span> <span class="o">%</span> <span class="s">&quot;sse-guice&quot;</span> <span class="o">%</span> <span class="s">&quot;0.7.0&quot;</span>
</span><span class='line'><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next up we need to modify the Application controller a bit</p>

<ul>
<li>It needs to take a dependency</li>
<li>It needs to bo be instantiable (e.g. not an <code>object</code> - this might be doable but the default approach in Guice seems to conflict with Plays approach to defining an instantiable controller)</li>
</ul>


<p>So we want to go from this,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
</span><span class='line'>    <span class="nc">Ok</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="s">&quot;Some Message&quot;</span><span class="o">))</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>To this,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">Application</span> <span class="nd">@Inject</span><span class="o">()(</span><span class="k">val</span> <span class="n">messeger</span><span class="k">:</span> <span class="kt">Messeger</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
</span><span class='line'>    <span class="nc">Ok</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">index</span><span class="o">(</span><span class="n">messeger</span><span class="o">.</span><span class="n">getMessage</span><span class="o">))</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>A few things of note here</p>

<ul>
<li>We use the <code>@Inject()</code> attribute here to mark this constructor as our default one (need by Guice to satisfy constructor injection)</li>
<li>Application is now a class.  Small change (a Levenshtein Distance of 6 even!) big difference.  Rather than having a singleton we now have something we can construct when we want (even in tests) and set it up really simply.  Construction and lifecycle can be handled via our DI library easily.</li>
<li>We are passing in some sort of dependency - in this case it&#8217;s a simple string barfer (<code>Messeger</code> is a trait) and the impl looks like this</li>
</ul>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">trait</span> <span class="nc">Messeger</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">getMessage</span> <span class="k">:</span> <span class="kt">String</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">object</span> <span class="nc">MessegerImpl</span> <span class="k">extends</span> <span class="nc">Messeger</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">getMessage</span> <span class="k">=</span> <span class="s">&quot;The Best Super Message&quot;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then we need to create our Guice module that will wire up our dependencies,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">import</span> <span class="nn">com.tzavellas.sse.guice.ScalaModule</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">SimpleModule</span> <span class="k">extends</span> <span class="nc">ScalaModule</span><span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">configure</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">bind</span><span class="o">[</span><span class="kt">Messeger</span><span class="o">].</span><span class="n">toInstance</span><span class="o">(</span><span class="nc">MessegerImpl</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>ScalaModule</code> declaration is a Scala-fied version of Guices <code>AbstractModule</code> with some helper and whatnot.  Guice applies some common sense to wiring so we don&#8217;t need to declare each controller type here etc.</p>

<p>Finally we need to start the DI mechanism and provide a way to instantiate controllers.  We do this via the Play feature of <code>GlobalSettings</code>.  In our <code>app</code> package we just put a <code>Global</code> object and set it up as needed</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">object</span> <span class="nc">Global</span> <span class="k">extends</span> <span class="nc">GlobalSettings</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">private</span> <span class="k">lazy</span> <span class="k">val</span> <span class="n">injector</span> <span class="k">=</span> <span class="nc">Guice</span><span class="o">.</span><span class="n">createInjector</span><span class="o">(</span><span class="k">new</span> <span class="nc">SimpleModule</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">override</span> <span class="k">def</span> <span class="n">getControllerInstance</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">controllerClass</span><span class="k">:</span> <span class="kt">Class</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">injector</span><span class="o">.</span><span class="n">getInstance</span><span class="o">(</span><span class="n">controllerClass</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>We use a <code>lazy</code> val to instantiate the <code>injector</code> with our <code>SimpleModule</code> and override the <code>getControllerInstance</code> method of our <code>GlobalSettings</code> class to use Guices injector.</p>

<p>Oh one last thing.  We need to tell Play what controllers we want to use this feature (it&#8217;s not an all or nothing thing which I guess is good).  We do this by marking the route declaration with an <code>@</code> in the <code>routes</code> file.  So it becomes this (notice the <code>@</code>)</p>

<pre><code># Home page
GET     /     @controllers.Application.index
</code></pre>

<p>Running the app gives us exactly what we expect but why stop there?  We need to test this stuff right?  Cool.  Testing is made easier - we can simply make use of the various helpers in Play like <code>FakeApplication</code> and <code>FakeRequest</code>,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">ApplicationSpec</span> <span class="k">extends</span> <span class="nc">Specification</span> <span class="o">{</span>
</span><span class='line'>  <span class="s">&quot;Using FakeApplication&quot;</span> <span class="n">should</span> <span class="o">{</span>
</span><span class='line'>    <span class="s">&quot;get the default message&quot;</span> <span class="n">in</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">running</span><span class="o">(</span><span class="nc">FakeApplication</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">val</span> <span class="n">home</span> <span class="k">=</span> <span class="n">route</span><span class="o">(</span><span class="nc">FakeRequest</span><span class="o">(</span><span class="nc">GET</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)).</span><span class="n">get</span>
</span><span class='line'>        <span class="n">contentAsString</span><span class="o">(</span><span class="n">home</span><span class="o">)</span> <span class="n">must</span> <span class="n">contain</span> <span class="o">(</span><span class="s">&quot;The Best Super Message&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or we can create a custom <code>Global</code> object with a <code>FakeApplication</code></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">ApplicationSpec</span> <span class="k">extends</span> <span class="nc">Specification</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">object</span> <span class="nc">DummyMessenger</span> <span class="k">extends</span> <span class="nc">Messeger</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">def</span> <span class="n">getMessage</span> <span class="k">=</span> <span class="s">&quot;Dummy Message&quot;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="s">&quot;Using FakeApplication&quot;</span> <span class="n">should</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">object</span> <span class="nc">DummyGlobal</span> <span class="k">extends</span> <span class="n">play</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="nc">GlobalSettings</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">override</span> <span class="k">def</span> <span class="n">getControllerInstance</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">c</span><span class="k">:</span> <span class="kt">Class</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">new</span> <span class="nc">Application</span><span class="o">(</span><span class="nc">DummyMessenger</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="s">&quot;get the an injected message&quot;</span> <span class="n">in</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">running</span><span class="o">(</span><span class="nc">FakeApplication</span><span class="o">(</span><span class="n">withGlobal</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="nc">DummyGlobal</span><span class="o">)))</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">val</span> <span class="n">home</span> <span class="k">=</span> <span class="n">route</span><span class="o">(</span><span class="nc">FakeRequest</span><span class="o">(</span><span class="nc">GET</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">)).</span><span class="n">get</span>
</span><span class='line'>        <span class="n">contentAsString</span><span class="o">(</span><span class="n">home</span><span class="o">)</span> <span class="n">must</span> <span class="n">contain</span> <span class="o">(</span><span class="s">&quot;Dummy Message&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And even lighter we can just test the controller as if it was just another class,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">ApplicationSpec</span> <span class="k">extends</span> <span class="nc">Specification</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">object</span> <span class="nc">DummyMessenger</span> <span class="k">extends</span> <span class="nc">Messeger</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">def</span> <span class="n">getMessage</span> <span class="k">=</span> <span class="s">&quot;Dummy Message&quot;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="s">&quot;Using direct controller testing&quot;</span> <span class="n">should</span> <span class="o">{</span>
</span><span class='line'>    <span class="s">&quot;return the dummy message&quot;</span> <span class="n">in</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">val</span> <span class="n">controller</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Application</span><span class="o">(</span><span class="nc">DummyMessenger</span><span class="o">)</span>
</span><span class='line'>      <span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">index</span><span class="o">()(</span><span class="nc">FakeRequest</span><span class="o">())</span>
</span><span class='line'>      <span class="n">contentAsString</span><span class="o">(</span><span class="n">result</span><span class="o">)</span> <span class="n">must</span> <span class="n">contain</span> <span class="o">(</span><span class="s">&quot;Dummy Message&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hopefully this gives you a good starter for using the new Play 2.1 <code>getContollerInstance</code> feature along with Guice.  As above you can find the code for this post on <a href="GlobalSettings#getControllerInstance">Ye &#8216;Ole Github</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Neo4J Talk: Using Graphs to Analyse Public Spending on International Development]]></title>
    <link href="http://yobriefca.se/blog/2012/12/12/neo4j-talk-using-graphs-to-analyse-public-spending-on-international-development/"/>
    <updated>2012-12-12T11:38:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/12/12/neo4j-talk-using-graphs-to-analyse-public-spending-on-international-development</id>
    <content type="html"><![CDATA[<p>Better late than ever, right?  So a few weeks ago I presented a bit of a case study on my use of Neo4J in a UK government project focused on increasing transparency around how the UK disburses foreign aid.  This post is a collection of all the useful resources mentioned in the talk.</p>

<ul>
<li><a href="https://speakerdeck.com/kouphax/neo4j-a-case-study">Slides on SpeakerDeck</a></li>
<li><a href="http://skillsmatter.com/podcast/nosql/using-graphs-to-analyse-public-spending-on-international-development">Video on Skills Matter</a></li>
</ul>


<p>Plenty of acronyms were thrown about and here are the useful links to some of the key ones.</p>

<ul>
<li><a href="http://digital.cabinetoffice.gov.uk/category/gds/">GDS (Government Digital Service)</a></li>
<li><a href="http://www.dfid.gov.uk/">DFID (Department for International Development)</a></li>
<li>IATI (International Aid Transparency Initiative) - <a href="http://iatiregistry.org/">Registry</a> and <a href="iatistandard.org">Standard</a></li>
<li>OIPA (Open IATI Parser and API) - <a href="http://oipa.openaidsearch.org/api/v2/">Open Aid Site</a> and <a href="https://github.com/openaid-IATI/OIPA-V2">Source</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vertical vs Horizontal Thinking]]></title>
    <link href="http://yobriefca.se/blog/2012/11/17/vertical-vs-horizontal-thinking/"/>
    <updated>2012-11-17T22:48:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/11/17/vertical-vs-horizontal-thinking</id>
    <content type="html"><![CDATA[<p>I&#8217;m not quite sure were this ramble is going to lead, it&#8217;s been a while since I&#8217;ve felt like writing something that hasn&#8217;t been clearly defined by my half conscious brain but lets take the journey anyway shall we?</p>

<p>This is going to be loosely related to agility, not necessarily the &#8220;agile method or process&#8221; but more simply about adapting to change and embracing transparency in a software project.  More often than not this can be simply referred to as &#8220;common sense&#8221; and it&#8217;s a great thing.</p>

<p>But I digress,</p>

<p>In a vertical world you deliver features by implementing vertical spikes through each layer of the system architecture.  It doesn&#8217;t have to be right, but it does need to be good enough for now.  Sure it may not deliver the best user experience or maybe there are more HTTP requests or database calls than necessary but it&#8217;s useable.  Its shippable.</p>

<p>In the horizontal world layers of the architecture are tackled by (possibly pseudo) specialists and delivered en masse.  This is very typical of the Big Design Upfront, Plan Based, Waterfall approach to delivery but its visible in a lot of projects in various guises and it&#8217;s rather natural to many people.</p>

<p>Now, on the surface, getting specialists to deliver what they know best and then smash them altogether actually sounds great.  You know your DB person is going to produce a wonderful hyper-normalised schema for you, your UI/UX person will deliver a gorgeous mockup of the site and your middle layer app people will deliver the best truly ReSTful service layer known to man.  But then you spend an insane amount of time (or many many little periods of time) doing the actual integration and making this vision a reality.  The testing, the regressions, the edge cases the performance hits and sacrifices through integrating perfect works of horizontal art.  Best case you get it done eventually, worst case someone else gets it done by layering hack upon hack at integration points just to get it working.</p>

<p>Now imagine your DB person gets eaten by a badger, or your UI person decides they&#8217;ve had enough and goes to live in a free-love commune and drink the spiked kool-aid?  I&#8217;ve overly dramatised the <a href="http://en.wikipedia.org/wiki/Bus_factor">Bus Factor</a> here but the point is still made.  You&#8217;ve lost siloed knowledge forever and you need to spend time building it up again, and time and quality slip.</p>

<p>Finally - projects that deliver horizontally are, more often than not, projects that have limited customer/stakeholder visibility.  Sometimes even less for end-users.  So delivering a mockup of the UI and a DB schema that can be exported as a nice UML diagram is enough to satisfy people that work is on-going and going well.  Even if it isn&#8217;t.  It&#8217;s not a lie but it is a false impression, and it&#8217;s an impression that doesn&#8217;t work for long especially if you have shorter release cycles with ongoing customer interaction.  A page of beautiful buttons that don&#8217;t do anything will create an impression that you are nearly done and can easily generate disappointment at subsequent demos.  Is it worth it?</p>

<p>Don&#8217;t get me wrong it is very possible to successfully deliver software in this manner, on time and on budget but so many things must fall into place and all the stars must be aligned that it&#8217;s a rather big risk, but a risk that people seem to ignore.</p>

<p>So I&#8217;m saying vertical is better and there are many reasons for that and I&#8217;ll touch on some of them here but there is one very fundamental reason it&#8217;s better.  Working and thinking vertically allows you to create a shippable product early.  It&#8217;s not all done, far from it.  It probably looks like ass as well but still it&#8217;s usable enough to get the job done, right?  Imagine using a new product that looked amazing but only had 3 working features and the rest of the buttons and knobs didn&#8217;t do anything.  Wow factor is for kids and sales men.</p>

<p>Why else is vertical thinking better?</p>

<p>For one everyone on the team works across all layers of the solution.  You don&#8217;t have huge silos of knowledge contained in a single brain of some crazy bus magnet.  Sure you may involve specialists to ensure you&#8217;re not doing it totally wrong but at least you&#8217;d be working WITH them and picking up parts of the vast knowledge they may have.</p>

<p>By delivering something &#8220;good enough for now&#8221; you actually reduce waste.  True you may re-write a few things to get it right but you haven&#8217;t spent hours crafting perfection only to tear it apart.  Even better the first iteration may make users realise - &#8220;Actually you know what?  That super whizzy button thing - we don&#8217;t need it&#8221;.  Waterfall attempts to &#8220;manage change&#8221; because change in waterfall is scary expensive.  Embrace it early and often and it much less costly.</p>

<p>Finally, the solution evolves rather than being dragged into existence from a 189 page document of business rules and textual assumptions.  This allows you to experiment and try things, throw them away or discover a better way of doing things.  You can adapt the solution at anytime to suit the changing nature of the environment it lives in.</p>

<p>Vertical thinking is a proven pattern in many other aspects of the software world.  TDD for example. Rather than writing reams of code and testing it manually later, you create a solution bit by bit and adapt it fearlessly as you go.  UI designers never just bang out one design and leave it there.  Smaller feedback loops are essential to flow and success and vertical thinking gives you this.  Break the habit of wowing people and replace it with the habit of delivering - it&#8217;s a better, longer lasting feeling of win.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Technology Techsmology]]></title>
    <link href="http://yobriefca.se/blog/2012/11/05/technology-techsmology/"/>
    <updated>2012-11-05T08:48:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/11/05/technology-techsmology</id>
    <content type="html"><![CDATA[<p>There is an old adage,</p>

<blockquote><p>Projects don&#8217;t fail because of technology decisions</p></blockquote>

<p>The younger me would have got all uppity and defensive when he heard this statement.  As a developer/architect type whose main goal is to make key technology decisions on a project (not to mention as a person who likes to grandiously consider themselves a craftsman) this does seem rather belittling.  Are you telling me all my decisions are fairly irrelevant?  I&#8217;ll just stay in bed then shall I?</p>

<p>But you know what?  The statement is also completely true.</p>

<p>But hey, wait - do you want to know something else? Yes? Good.</p>

<p>The world of technology is not black and white, projects aren&#8217;t either a success or a failure, it&#8217;s simply not a binary system.  Projects may not fail, but they could be late.  They could be well over budget.  They could have code bases so toxic that you need to hire contractors to do the work because no one wants to touch it.  They could be so overly laden in patterns and complex architecture that even small changes take weeks or months to implement (and who foots the bill for that?).</p>

<p>Technology decisions can indirectly ruin the morale of your staff, muddy the relationship with your customers and generate really high turnover of staff in your company (which may be a good fit for some companies but you can never foster excellence if you don&#8217;t nurture talent).</p>

<p>This statement can also be used as a weapon - a weapon to excuse bad decisions and hold back change (both good and bad, in short it stiffles learning).  People cling to technologies that they used in the past, for fear of more pain with other technologies.  They shoehorn their existing skillset into problem domains that aren&#8217;t a good fit.  When this happens, at the extreme you end up with specialists that simply can&#8217;t adapt to shifts in technology fast enough.</p>

<p>So yeah, projects don&#8217;t fail because of technology decisions.  But you know what - if your dentist turned round to you with an evil grin and a rusty chisel and <a href="http://en.wikipedia.org/wiki/Law_of_the_instrument">Maslow&#8217;s Hammer</a> citing - &#8220;No surgery ever went wrong because of a lack of anesthetic&#8221; - you&#8217;re not likely to get in to that chair and open wide.  And even if you did (maybe, you&#8217;re drunk, maybe people keep telling you this dentist is the best, whatever) the experience would be painful, recovery time would be longer and subsequent treatments would probably be more painful.  A rather shambling metaphor I admit but I write what my brain dictates - I have not choice in the matter.</p>

<p>Finally, I fully accept that many of these decisions are out of our control.  Customers, especially big ones, generally have the final say, they&#8217;ve potentially invested a lot of time on a certain stack and have a lot of legacy (read: code that still works) solutions in play.  True, but one of our goals is to at least inform these people of the alternatives and let them make an informed decision - maybe not today but soon enough the cost of developing and maintaining new systems built on out-of-support JDKs will come under scrutiny and they&#8217;ll need to consider alternatives, alternatives that you&#8217;ve already enlightened them about.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Neo4J Talk in November]]></title>
    <link href="http://yobriefca.se/blog/2012/11/02/neo4j-talk-in-november/"/>
    <updated>2012-11-02T08:36:00+00:00</updated>
    <id>http://yobriefca.se/blog/2012/11/02/neo4j-talk-in-november</id>
    <content type="html"><![CDATA[<p>Its been rather quiet around here of late, truth be told I&#8217;ve been rather busy with my work (this peak is a rather large one).  Being busy for me usually implies I&#8217;m not getting bored on cookie cutter, by the numbers web apps, being busy means I&#8217;m doing new interesting stuff.  I&#8217;ve been doing a bit of work with the UK Government, specifically DFID (Department for International Developement) around the nobel goal of transaprency and open data.  The project involves interrogating a lot of highly connected data in weird and wonderful ways which can mean only one thing - Graph Databases.  We tried the relational database route early on and it was causing too much pain to get the data we wanted,</p>

<div style="text-align:center; margin-bottom:15px;">
  <img src="http://yobriefca.se/images/joins.jpg" />
</div>


<p>So having recently been enlightened by <a href="https://twitter.com/jimwebber">Jim Webbers</a> talk on <a href="http://neo4j.org/">Neo4J</a> I decided to try the Graph Database appraoch and it paid off, in spades.  Then one humble brag on Twitter later and I get asked to present a case study on Neo4J at the London User Group - and I&#8217;m stoked.  This is the first talk I&#8217;ve ever given that I don&#8217;t have to pretend to know what I&#8217;m talking about - awesome.</p>

<p>If you&#8217;re in London on the 28th of November come along and see how I&#8217;ve (probably incorrectly) used Neo4J.</p>

<pre><code>CASE STUDY: using graphs to analyse public spending on international development
Wednesday, November 28, 2012
6:30 PM To 7:30 PM

Skills Matter
The Skills Matter eXchange
116-120 Goswell Road
London EC1V7DP
</code></pre>

<p><a href="http://www.meetup.com/graphdb-london/events/87069112/" data-event="87069112" class="mu-rsvp-btn">RSVP</a></p>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s); js.id=id;js.async=true;js.src="https://secure.meetup.com/890357987448484755600/script/api/mu.btns.js?id=9e8dku34o6mqp5knqbjlk6lfvj";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","mu-bootjs");</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learning Resources for Scala, Play! and Mongo]]></title>
    <link href="http://yobriefca.se/blog/2012/10/06/learning-resources-for-scala/"/>
    <updated>2012-10-06T10:17:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/10/06/learning-resources-for-scala</id>
    <content type="html"><![CDATA[<p>I&#8217;ve been asked a lot recently for some resources on various technologies, namely Scala, Play! (2.0) and Mongo so I thought I&#8217;d share the wealth (so to speak).</p>

<p>Got any good resources that I haven&#8217;t listed here?  Let me know.</p>

<h2>Scala</h2>

<ul>
<li><a href="http://www.scala-lang.org/">Official Site</a></li>
<li><a href="https://vimeo.com/40255430">Screencast</a></li>
<li><a href="http://www.scala-lang.org/node/1305">Various Links from the official site</a></li>
<li><a href="http://scalatron.github.com/">Scalatron</a> - learn Scala by programming a game</li>
<li><a href="http://twitter.github.com/scala_school/">Scala School</a> - Twitters learning resource</li>
<li><a href="http://typesafe.com/resources/book/scala-for-the-impatient">Scala for the Impatient</a> - excellent &#8220;lite&#8221; version of a great book.</li>
<li><a href="http://typesafe.com/resources/videos">Scala Videos</a></li>
<li><a href="https://www.coursera.org/course/progfun">Coursera Course</a> - Scala course on Coursera by Martin Odersky. Only good for five weeks or so but during that time anyone can sign up and download the video lectures and materials.</li>
</ul>


<h2>Play!</h2>

<ul>
<li><a href="http://www.playframework.org/">Official Site</a></li>
<li><a href="http://www.playframework.org/documentation/2.0.3/ScalaHome">Official Docs</a> - Excellent resource</li>
<li><a href="https://github.com/playframework/Play20/tree/master/samples/scala">Scala Code Samples</a> - Some nice examples from the official Github repo.</li>
<li><a href="http://yobriefca.se/blog/2012/05/08/starter-for-10-scala/">Scala, Play! and Mongo</a> - Blog post on writing a simple app using all those technologies.</li>
<li><a href="http://www.artima.com/articles/play2_scala_squeryl.html">Getting Started with Play! 2, Scala and Squeryl</a></li>
<li><a href="http://www.jamesward.com/2012/02/21/play-framework-2-with-scala-anorm-json-coffeescript-jquery-heroku">Play! 2 Getting Started</a></li>
</ul>


<h2>Mongo</h2>

<ul>
<li><a href="http://www.mongodb.org/">Official Website</a></li>
<li><a href="http://try.mongodb.org/">Try Mongo</a> - A Tiny MongoDB Browser Shell (mini tutorial included)</li>
<li><a href="http://openmymind.net/mongodb.pdf">Little Book of Mongo</a> (<a href="http://openmymind.net/mongodb.epub">epub</a>) - Book about Mongo</li>
<li><a href="http://mongly.com/">Mongly</a> - Various tutorials and essays on MongoDB</li>
<li><a href="https://speakerdeck.com/u/kouphax/p/mongodb">Presentation</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[StackMob Lightning Talk]]></title>
    <link href="http://yobriefca.se/blog/2012/09/13/stackmob-lightning-talk/"/>
    <updated>2012-09-13T20:33:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/09/13/stackmob-lightning-talk</id>
    <content type="html"><![CDATA[<p>So I finally found an opportunity to deliver a quick lightning talk on <a href="http://stackmob.com">StackMob</a> at our
monthly CodeSlice sessions in work.  Knocked it up today over lunch and presented it tonight.  Would like to
pull this one out into a more in depth and interactive look&#8230; just waiting for someone to ask :)</p>

<h2>Video</h2>

<iframe src="http://player.vimeo.com/video/49405807?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff" width="500" height="375" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>


<h2>Slides</h2>

<script async class="speakerdeck-embed" data-id="5051d07ffe08c30002031d18" data-ratio="1.3333333333333333" src="http://yobriefca.se//speakerdeck.com/assets/embed.js"></script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Securely Serving Static Files on Heroku]]></title>
    <link href="http://yobriefca.se/blog/2012/08/21/securely-serving-static-files-on-heroku/"/>
    <updated>2012-08-21T21:00:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/08/21/securely-serving-static-files-on-heroku</id>
    <content type="html"><![CDATA[<p>More than once I&#8217;ve had a need to host what is essentially static content on Heroku.  For example when building a simple internal web app for my company that used an existing API or Parse.  Invariably in this situation I have also needed to secure this app - nothing to drastic, no need for multiple user accounts or roles or any such nonsense (we generally run our non-essential systems on the honour system).  Basic auth is more than enough.</p>

<p>So, static content plus basic auth.  Heroku itself doesn&#8217;t offer basic auth as an option (why would it?) and so you&#8217;d need to roll it into your app.  Once I hosted my static stuff inside a Scala/Play! app, once a Sinatra app and the other a Rails app - variety is the spice of life.  But each time I did it I felt a little dirty - it was noticeably slower serving this content from within an app and it seemed rather wasteful.  So, in a bid to stamp out technical debt, I&#8217;ve ripped out all those web frameworks an replaced them with good old Apache.</p>

<p>Now anyone with any knowledge of Apache will already be able to deduce the steps required here - but I want to note it for posterity, for myself, when I forget, in about a week.</p>

<h2>BuildPack</h2>

<p>First things first you&#8217;ll want to get your hands on a custom <a href="https://devcenter.heroku.com/articles/buildpacks">Heroku BuildPack</a> - these are the things that prepare your app instance with all the software and support it needs to run.</p>

<p>I recommend you fork and clone the <a href="https://github.com/pearkes/heroku-buildpack-static">heroku-buildpack-static</a> buildpack available from pearkes on GitHub.</p>

<h2>.htpassword</h2>

<p>Next you need to generate your <code>.htpasswd</code> file that will serve as your store for your Basic Auth credentials.  The two simplest ways to generate one of these is to either use <a href="http://www.htaccesstools.com/htpasswd-generator/">htaccesstools.com&#8217;s htpasswd generator</a> or generate on via the command line.</p>

<p>The simplest command to generate one is this,</p>

<pre><code>htpasswd -cb &lt;password_file&gt; &lt;username&gt; &lt;password&gt;
</code></pre>

<p>For example,</p>

<pre><code>htpasswd -cb .htpasswd james password
</code></pre>

<p>Will generate a file in the current directory called .htpasswd (the standard name for these files) with a single entry of username = james and password = password.</p>

<h2>Updating the BuildPack</h2>

<p>Either run the above command in the <code>heroku-buildpack-static/conf</code> folder or move your <code>.htpasswd</code> file into the that folder.</p>

<p>Next up you want to configure apache to authenticate against that generate password file.  Adding the following lines to the <code>httpd.conf</code> file in the <code>heroku-buildpack-static/conf</code> will lock all assets under your apps site down,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='apache'><span class='line'>    <span class="nb">AuthType</span>      Basic
</span><span class='line'>    <span class="nb">AuthName</span>      <span class="s2">&quot;Authentication Required&quot;</span>
</span><span class='line'>    <span class="nb">AuthUserFile</span>  <span class="s2">&quot;/app/apache/conf/.htpasswd&quot;</span>
</span><span class='line'>    <span class="nb">Require</span>       valid-user
</span></code></pre></td></tr></table></div></figure>


<p>This block should be added to the configuration section starting <code>&lt;Directory /&gt;</code> i.e.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='apache'><span class='line'>  <span class="nt">&lt;Directory</span> <span class="s">/</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nb">Options</span> FollowSymLinks
</span><span class='line'>      <span class="nb">AllowOverride</span> <span class="k">None</span>
</span><span class='line'>
</span><span class='line'>      <span class="nb">AuthType</span>      Basic
</span><span class='line'>      <span class="nb">AuthName</span>      <span class="s2">&quot;Authentication Required&quot;</span>
</span><span class='line'>      <span class="nb">AuthUserFile</span>  <span class="s2">&quot;/app/apache/conf/.htpasswd&quot;</span>
</span><span class='line'>      <span class="nb">Require</span>       valid-user
</span><span class='line'>
</span><span class='line'>      <span class="nb">Order</span> deny,allow
</span><span class='line'>      <span class="nb">Deny</span> from <span class="k">all</span>
</span><span class='line'>  <span class="nt">&lt;/Directory&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You&#8217;ll notice the <code>AuthUserFile</code> points to the correct absolute path for our custom .htpasswd file.  If you called it anything else please update this line accordingly.</p>

<p>Commit and push that to your forked repo.</p>

<h2>Using the BuildPack</h2>

<p>Finally we need to tell Heroku to use the custom buildpack.  If you have yet to create an app then you can specify the buildpack during creation,</p>

<pre><code>heroku create &lt;app name&gt; --buildpack &lt;url to your repo&gt;
</code></pre>

<p>If you have created you app already you can add the buildpack through an additional config setting</p>

<pre><code>heroku config:add BUILDPACK_URL=&lt;url to your repo&gt;
</code></pre>

<p>Push your new or updated site to Heroku and watch in awe as your site is that bit more secure.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dependencies in JavaScript: Constructor, Setter or Global]]></title>
    <link href="http://yobriefca.se/blog/2012/08/21/dependencies-in-javascript-constructor/"/>
    <updated>2012-08-21T07:59:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/08/21/dependencies-in-javascript-constructor</id>
    <content type="html"><![CDATA[<p>There has been an interesting conversation on Twitter over the last number of hours between @derickbailey and a number of other people and it all started with this tweet,</p>

<blockquote class="twitter-tweet tw-align-center"><p>anyone have links to articles on why setter injection is evil? /cc <a href="https://twitter.com/jbogard"><s>@</s><b>jbogard</b></a> <a href="https://twitter.com/jeremydmiller"><s>@</s><b>jeremydmiller</b></a> <a href="https://twitter.com/jflanagan"><s>@</s><b>jflanagan</b></a> <a href="https://twitter.com/chadmyers"><s>@</s><b>chadmyers</b></a></p>&mdash; derickbailey (@derickbailey) <a href="https://twitter.com/derickbailey/status/237658824163614720" data-datetime="2012-08-20T21:14:13+00:00">August 20, 2012</a></blockquote>


<script src="http://yobriefca.se//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>The conversation has been around using DI and IoC in JavaScript (yes I know they are not one in the same, and I know a Container is not a necessary part of DI or IoC thank you very much).  Simple answer is this - good patterns have a place in any language provided they aren&#8217;t abused mercilessly.  But lets get back to the discussion - why would you use constructor injection over setter injection?  Is setter injection evil?  Obviously no strategy is actually evil per-say - just used in the wrong place at the wrong time. So lets go back to the first question - constructor injection vs. setter injection.</p>

<h2>Constructor Injection or Setter Injection</h2>

<p>The simplest answer to this was one I gave @derickbailey earlier,</p>

<blockquote class="twitter-tweet tw-align-center" data-in-reply-to="237664796298854401"><p><a href="https://twitter.com/derickbailey"><s>@</s><b>derickbailey</b></a> resolve mandatory dependenciesvia constructor injection, optional dependencies via setter.  This is a common convention.</p>&mdash; James Hughes (@kouphax) <a href="https://twitter.com/kouphax/status/237792703826522112" data-datetime="2012-08-21T06:06:13+00:00">August 21, 2012</a></blockquote>


<script src="http://yobriefca.se//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>This little bit of knowledge I&#8217;ve had since living down in the guts of Spring MVC about 5 years ago and it makes a lot of sense regardless of how those dependencies are getting in there.</p>

<h2>Fail Early</h2>

<p>When your code goes into an invalid state you want to fail as quickly as possible, this makes debugging much easier and prevents an avalanche of unexpected behaviour.  Using constructor injection (and asserting the existence of dependencies) gives you this ability.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">MyThingy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredA</span><span class="p">,</span> <span class="nx">requiredB</span><span class="p">){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">requiredA</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>  
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">requiredB</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">// rest of my code</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doAThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">.</span><span class="nx">magic</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">.</span><span class="nx">beepboop</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">thing</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyThing</span><span class="p">();</span> <span class="c1">// FAIL FAIL FAIL</span>
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">doAThing</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you tried to achieve the same thing with setter injection you would be failing much later in the proceedings,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">MyThingy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setRequiredA</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredA</span><span class="p">){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span> <span class="o">=</span> <span class="nx">requiredA</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setRequiredB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredB</span><span class="p">){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span> <span class="o">=</span> <span class="nx">requiredB</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doAThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>   
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">.</span><span class="nx">magic</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">.</span><span class="nx">beepboop</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">thing</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyThing</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">doAThing</span><span class="p">();</span> <span class="c1">// FAIL FAIL FAIL</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now imagine that the last two lines are miles apart in code-lines, you&#8217;ve gone and lost all context when debugging.  Sure in this trivial example it would be fairly easy to resolve this but if you&#8217;ve gone and lost the plot and created a heavily nested object graph you&#8217;ll be crying before they day is out.</p>

<p>Now setter injection does have it&#8217;s place - for <strong>optional</strong> dependencies,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">MyThingy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredA</span><span class="p">,</span> <span class="nx">requiredB</span><span class="p">){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">requiredA</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>  
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">requiredB</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">// rest of my code</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setOptionalC</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">optionalC</span><span class="p">){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">optionalC</span> <span class="o">=</span> <span class="nx">optionalC</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doAThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">optionalC</span><span class="p">)</span> <span class="nx">optionalC</span><span class="p">(</span><span class="s2">&quot;doing a thing...&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">.</span><span class="nx">magic</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">.</span><span class="nx">beepboop</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">thing</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyThing</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">setOptionalC</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">});</span>
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">doAThing</span><span class="p">();</span> <span class="c1">// logs &quot;doing a thing...&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>So the extension of the rule is that</p>

<blockquote><p>Anything injected via <strong>setter injection</strong> needs to be either defaulted initially or checked for existence before use.</p></blockquote>

<h2>Readability</h2>

<p>By following this convention, heck by following any agreed convention, you get better visibility of the expected behaviour of your code.  You know what the object needs to get the job done.  That feels like a poor argument but I think it still warrants a mention here.</p>

<h2>Over Engineering and Deep Graphs</h2>

<p>Obviously if you&#8217;ve over-designed your classes or it has grown out of control this approach becomes difficult to manage.  I&#8217;ve seen something akin to this in some projects,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CoordinatorOfAllTheThings</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">j</span><span class="p">,</span><span class="nx">k</span><span class="p">,</span><span class="nx">l</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">n</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">p</span><span class="p">....)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Someone has decided to make every bit of functionality it&#8217;s own little class or module and so the dependency graph has become incredibly broad.  In fact this might suggest they are creating a deep graph as well and simply passing the dependencies down the chain.  <strong>If you have a lot of dependencies then there is something wrong with the object you are creating</strong>.</p>

<p>For fine grained, inter-object communication dependency injection is fine but when you are scaling up to more coarse, inter-module or component communication an evented or message based approach is almost always a better option.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="c1">// rest of previous code</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doAThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="nx">EventStream</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;doneathing&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">EventStream</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</span><span class='line'>      <span class="nx">on</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">OtherThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredD</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">EventStream</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;doneathing&quot;</span><span class="p">,</span> <span class="nx">requiredD</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">thing</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyThingy</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">other</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OtherThing</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;stuff done&quot;</span><span class="p">);</span> <span class="p">});</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">doAThing</span><span class="p">();</span> <span class="c1">// logs &quot;stuff done&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is a rather contrived example but it should server a point.</p>

<h3>The Global Issue</h3>

<p>You&#8217;ll notice the EventStream object in the code above is global, you&#8217;ll also notice I have skipped part of this posts title  (&#8230; or Global).  Lets come to that now.  It is possible to achieve the same results as constructor/setter injection using global scope,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">MyThingy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">global</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>    
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">global</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">)</span> <span class="k">throw</span> <span class="s2">&quot;Missing Dependency&quot;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">// rest of my code</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doAThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">global</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">.</span><span class="nx">magic</span><span class="p">()</span> <span class="o">+</span> <span class="nx">global</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">.</span><span class="nx">beepboop</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">thing</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyThing</span><span class="p">();</span> <span class="c1">// FAIL FAIL FAIL</span>
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">doAThing</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>So rather than inject the necessary dependencies in we are relying on the fact they exist in global scope.  This works fine in some situations.  The EventStream object above is a global hub that can be used throughout the application.  I&#8217;m ok with that.  The risk of global scope is that it&#8217;s easy for objects to be redefined by other actors in your system so existence or behaviour is never guaranteed.  So use sparingly.</p>

<h2>Moptional</h2>

<p>The other alternative approach would be to make everything Moptional.  That is, anything mandatory should be instantiated with a default and provide setter injection for changing default behaviour.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">MyThingy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DefaultRequiredA</span><span class="p">();</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DefaultRequiredB</span><span class="p">();</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">// rest of my code</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setRequiredA</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredA</span><span class="p">){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span> <span class="o">=</span> <span class="nx">requiredA</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setRequiredB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">requiredB</span><span class="p">){</span>
</span><span class='line'>      <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span> <span class="o">=</span> <span class="nx">requiredB</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nx">MyThingy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doAThing</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredA</span><span class="p">.</span><span class="nx">magic</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">requiredB</span><span class="p">.</span><span class="nx">beepboop</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">thing</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyThing</span><span class="p">();</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">setRequiredB</span><span class="p">(</span><span class="k">new</span> <span class="nx">CustomRequiredB</span><span class="p">())</span>
</span><span class='line'>  <span class="nx">thing</span><span class="p">.</span><span class="nx">doAThing</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>You kind of get the best of worlds here - not having to worry about default behaviour but have the ability to override this (for example in testing).  But then you need to think about this.  Why are you providing this sort of strategy?  Are you simply hiding all implementation for an object but providing setters and getter to simply aid testing?  If that&#8217;s the case - STOP.  Your code should be testable but you should not change your code to simply aid testing.  Perhaps its time to go back and re-think your strategy?  Also, for testing - it&#8217;s entirely possible, given the dynamic nature of JavaScript, to redefine the internal dependencies prior to them being instantiated in your object anyway.  Don&#8217;t add features or behaviour that you don&#8217;t actually need to deliver the solution.</p>

<h2>Wrap Up</h2>

<p>This was playing over and over on my ride into work this morning (I cycle I have a lot of thinking time) and I wanted to get it out there.  Hopefully be useful to people asking some questions on this topic.</p>

<p>Oh and IoC <strong>Containers</strong> in JavaScript&#8230;&#8230; don&#8217;t.</p>

<p>My $0.02</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Backend as a Service - Part One]]></title>
    <link href="http://yobriefca.se/blog/2012/08/08/backend-as-a-service-part-one/"/>
    <updated>2012-08-08T14:10:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/08/08/backend-as-a-service-part-one</id>
    <content type="html"><![CDATA[<p>I recently wrote an article for <a href="http://cloudspring.com/">CloudSpring</a> (a part of the <a href="http://www.sitepoint.com/">SitePoint</a> family) around what you can expect and what you should think about when going for one of the &#8220;Backend as a Service&#8221; offerings on the market.</p>

<p>The article is <a href="http://cloudspring.com/backend-as-a-service-part-1/">now live</a>.</p>

<h3><a href="http://cloudspring.com/backend-as-a-service-part-1/">CloudSpring: Backend as a Service Part 1</a></h3>

<p>Part 2, the one where I look at whats actually out there, will be ready within the next week.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fear of Code]]></title>
    <link href="http://yobriefca.se/blog/2012/08/05/fear-of-code/"/>
    <updated>2012-08-05T20:36:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/08/05/fear-of-code</id>
    <content type="html"><![CDATA[<p>More silly wishy washy nonsense - take what you will.</p>

<p>Recently Thomas Fuchs has this to say on twitter,</p>

<blockquote class="twitter-tweet"><p>As a programmer, you should be afraid of code, and eliminate as much as possible.</p>&mdash; Thomas Fuchs (@thomasfuchs) <a href="https://twitter.com/thomasfuchs/status/230871987881390081" data-datetime="2012-08-02T03:45:45+00:00">August 2, 2012</a></blockquote>


<script src="http://yobriefca.se//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p>Its great, I love this stuff and it got me thinking and I thought why not put my thoughts up here, right?  After all this is what this place is all about.</p>

<p>Rather than describe the emotion as fear (&#8220;be afraid of code&#8221;) i&#8217;d posit that, as a programmer, you should be respectful of code.  Rather than eliminate as much as possible you should conserve it as much as possible - don&#8217;t write it in the first place.</p>

<p>A while back I posted something similar on Twitter - I can&#8217;t find the tweet right now but it went a little something like this,</p>

<blockquote><p>Adding code is great, removing code is greater but not writing the code in the first place is greatest</p></blockquote>

<p>As a developer it is very easy to fall into the trap of creating some sort of highly reusable complex masterpiece that is going to change the way we write code forever.  But down that road, madness lies.  Desigining too much, adding too many features, creating too many abstractions, handling every single edge case, writing too many tests - all this stuff is just extra complexity, extra code that simply muddies the solution and makes it harder for someone to understand the solution.  More code doesn&#8217;t solve the problem faster, more code doesn&#8217;t make things easier, more code doesn&#8217;t help.</p>

<p>In other words - writing too much code, regardless of quality is just a selfish act.  That goes for 3rd party code too.</p>

<p>Quit it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[expect.kt - Testing Library for Kotlin]]></title>
    <link href="http://yobriefca.se/blog/2012/07/25/expect-dot-kt-testing-library-for-kotlin/"/>
    <updated>2012-07-25T20:31:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/25/expect-dot-kt-testing-library-for-kotlin</id>
    <content type="html"><![CDATA[<p>In a bid to delve into the <a href="http://kotlin.jetbrains.org/">language</a> a bit further than a rake of tiny console apps I decided to do something &#8220;real&#8221; with Kotlin.  With that in mind - welcome <a href="https://github.com/kouphax/expect.kt">expect.kt</a>.</p>

<p>It started purely as a learning venture but I think there is a certain usefulness in the library so its probably worth sharing :).  Now it&#8217;s worth noting that kotlin already has a number of testing statements that you can achieve a lot of this stuff with - this library gives you a few things over and above these statements</p>

<ol>
<li>Alternative syntax.  Testing is quite a personal thing and some people like to write things in different ways.</li>
<li>Descriptive assertions.  Some would say <code>expect(2).toBePositive()</code> reads better than <code>assertTrue(2 &gt; 0)</code> or <code>expect(2 &gt; 0) { true }</code>.  Again its all about taste, and variety is the spice of life.</li>
<li>Chained assertions.  See later</li>
</ol>


<p>Rather than some campaign to replace the inbuilt expectations and assertions this library intended to complement them.</p>

<h2>So what is expect.kt?</h2>

<p>Expect.kt is a set of (growing) assertions/expectations that you can use in your kotlin based tests.  It gives you a number of ways to assert your expectations and gives you quite descriptive methods in which to do it.</p>

<h3>Expect Syntax</h3>

<p>The  expect syntax is the default way to assert things,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">tests</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.junit.Test</span> <span class="n">as</span> <span class="n">test</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">kotlin.expectations.*</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">StringExpectationTests</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">test</span> <span class="n">fun</span> <span class="nf">testHelloWorld</span> <span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">expect</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">).</span><span class="na">toStartWith</span><span class="o">(</span><span class="s">&quot;Hell&quot;</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Most of that is boilerplate JUnit testy things but the key line is</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">expect</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">).</span><span class="na">toStartWith</span><span class="o">(</span><span class="s">&quot;Hell&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Reads quite nicely IMHO.</p>

<h3>Should Syntax</h3>

<p>The should syntax offers a more fluent syntax if you want to call it that, if we wanted to write the same test above using the should syntax we could do this,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="s">&quot;Hello World&quot;</span><span class="o">.</span><span class="na">should</span><span class="o">.</span><span class="na">startWith</span><span class="o">(</span><span class="s">&quot;Hell&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>So rather than wrap your target with an expect you get and extension function to fluently assert it.</p>

<h3>Chaining</h3>

<p>Sometimes making a single assertion on a result isn&#8217;t enough and rather than write <code>assertTrue(...)</code> multiple times you can use extpect.kt&#8217;s chaining support.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">expect</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">).</span><span class="na">toStartWith</span><span class="o">(</span><span class="s">&quot;Hell&quot;</span><span class="o">).</span><span class="na">and</span><span class="o">.</span><span class="na">toEndWith</span><span class="o">(</span><span class="s">&quot;rld&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or, with the should syntax,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="s">&quot;Hello World&quot;</span><span class="o">.</span><span class="na">should</span><span class="o">.</span><span class="na">startWith</span><span class="o">(</span><span class="s">&quot;Hell&quot;</span><span class="o">).</span><span class="na">and</span><span class="o">.</span><span class="na">endWith</span><span class="o">(</span><span class="s">&quot;rld&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>It&#8217;s a bit more readable than expect after expect, right?</p>

<p>So thats it for now - there are a number of assertions implemented already on the useful types (Strings, Ints, Doubles, Dates, Booleans for example) and there are more planned on the way.  Currently you&#8217;ll be wanting to build from source (or copy/paste what you need).</p>

<p>Finally - A shout out to .NETs <a href="http://fluentassertions.codeplex.com/">FluentAssertions</a> where a lot of the assertions found their origin!</p>

<p><a href="https://github.com/kouphax/expect.kt">expect.kt</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kotlin: Nullable Extensions]]></title>
    <link href="http://yobriefca.se/blog/2012/07/18/kotlin-nullable-extensions/"/>
    <updated>2012-07-18T22:26:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/18/kotlin-nullable-extensions</id>
    <content type="html"><![CDATA[<p>Haskell doesn&#8217;t have if statements - that blew my mind the first time my old Scala mentor told me it.  <code>if</code>s just don&#8217;t work with a strong function approach.  Plus you know what - <code>if</code>s are rather ugly especially when you need to wrap ALL THE THINGS in a null check.  Scala has a type called <code>Option</code>.  An <code>Option</code> is essentially a collection of none or one instances of a type.  If everything returned an <code>Option</code> nothing would be null and you don&#8217;t need to do any null checks (they are much more powerful than I am making out but for now this is all that is necessary).</p>

<p>Kotlin doesn&#8217;t have the <code>Option</code> type but it does have two things that allow you to act like it does,</p>

<ol>
<li>Nullable types - e.g. <code>String</code> vs <code>String?</code> , and,</li>
<li>Nullable Extension Functions</li>
</ol>


<p>Remember the brief definition of an <code>Option</code> - it&#8217;s a list of 0 or 1 instances of a particualr type and as such we can treat it a bit like a list.  Now once we get functional with our badselves this makes null handling unnecessary.  We can use all those nice little functional methods that you get with collections - map, forEach, filter, fold etc.</p>

<p>This means you&#8217;re less inclined to use <code>if</code>s and, more importantly, less inclined to use mutable variables which is great for building performant, scalable soltions.</p>

<p>Lets take a really contrived example to show you what I mean.  OImagine this bit of code&#8230;.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>   <span class="n">val</span> <span class="n">auth</span> <span class="o">=</span> <span class="n">authenticate</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">)</span>
</span><span class='line'>   <span class="n">var</span> <span class="n">view</span> <span class="o">:</span> <span class="n">View</span> <span class="o">=</span> <span class="kc">null</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">if</span> <span class="o">(</span><span class="n">auth</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
</span><span class='line'>          <span class="n">view</span> <span class="o">=</span> <span class="n">views</span><span class="o">.</span><span class="na">html</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="s">&quot;Invalid Username or Password&quot;</span><span class="o">)</span>
</span><span class='line'>   <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span><span class='line'>          <span class="n">view</span> <span class="o">=</span> <span class="n">views</span><span class="o">.</span><span class="na">html</span><span class="o">.</span><span class="na">index</span><span class="o">(</span><span class="n">auth</span><span class="o">)</span>
</span><span class='line'>   <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">return</span> <span class="n">view</span>
</span></code></pre></td></tr></table></div></figure>


<p>We want to authenticate a user and return a certain view.  Now yes we could refactor this down into something more bitsize but this is a very common state to find code - so bare with me for demonstration purposes.</p>

<p><code>authenticate</code> returns a user if the username and password was correct otherwise it returns null.  With our nullable extensions (by importing <code>kotlin.nullable.*</code>) we can reduce this into something more Scala-like,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="k">return</span> <span class="nf">authenticate</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">).</span><span class="na">map</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">views</span><span class="o">.</span><span class="na">html</span><span class="o">.</span><span class="na">index</span><span class="o">(</span><span class="n">it</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span> <span class="o">?:</span> <span class="n">views</span><span class="o">.</span><span class="na">html</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="s">&quot;Invalid Username or Password&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>So what we have done here is basically take an object (the user), if it exists, and transform it to another object which we return.  Otherwise we return something different.  This is much simpler and avoids having to create a mutable var (yes we could have avoided that in the other example but in many cases its very difficult to achieve this).  In fact I am not even a fan of the elvis operator there (<code>?:</code>) and have a Scala-like syntax <a href="https://github.com/JetBrains/kotlin/pull/100">pull request</a> open for getOrElse.  A small syntactic change that I think allows you create a much neater, chainable block of code.</p>

<p>Thats only the tip of the iceberg on Nullable Extensions - those of you with a functional mind will be able to put these collection-like extensions to great use I reckon.  Not quite Scalas <code>Option</code> type but good enough at providing the common features for me.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kotlin: Extension Functions]]></title>
    <link href="http://yobriefca.se/blog/2012/07/16/kotlin-extension-functions/"/>
    <updated>2012-07-16T22:04:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/16/kotlin-extension-functions</id>
    <content type="html"><![CDATA[<p>In any language (that supports the concept) extension functions are nothing more than syntactic sugar.  Instead of writing,</p>

<pre><code>StringUtils.encrypt(mystring, "salt")
</code></pre>

<p>Extension functions allow you to write,</p>

<pre><code>mystring.encrypt("salt")
</code></pre>

<p>Once you start moving into the world of chaining things get much cleaner.</p>

<pre><code>encrypted = StringUtils.encrypt(mystring, "salt")
encoded = StringUtils.encode(encrypted, "UTF-8")
</code></pre>

<p>or worse,</p>

<pre><code>StringUtils.encode(StringUtils.encrypt(mystring, "salt"), "UTF-8")
</code></pre>

<p>I&#8217;ve seen this done a few times, it happens.  But with sugary sweet extension functions (Extension Methods in C#, Implicit Conversions in Scala) you could just do this,</p>

<pre><code>mystring.encrypt("salt").encode("UTF-8")
</code></pre>

<p>Much nicer.</p>

<p>Kotlin, unlike crusty old Java, supports extension functions.  Here is how you&#8217;d implement the methods above</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">fun</span> <span class="n">String</span><span class="o">.</span><span class="na">encrypt</span><span class="o">(</span><span class="nl">salt:</span> <span class="n">String</span><span class="o">):</span> <span class="n">String</span> <span class="o">{</span>
</span><span class='line'>   <span class="k">return</span> <span class="nf">StringBuffer</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">salt</span><span class="o">)?.</span><span class="na">reverse</span><span class="o">().</span><span class="na">toString</span><span class="o">()</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">fun</span> <span class="n">String</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="nl">encoding:</span> <span class="n">String</span><span class="o">)</span> <span class="o">:</span> <span class="n">ByteArray</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">encoding</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And we can use these, as you&#8217;d expect, like so,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">fun</span> <span class="nf">main</span><span class="o">(</span><span class="nl">args:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">val</span> <span class="n">mystring</span> <span class="o">=</span> <span class="s">&quot;james&quot;</span>
</span><span class='line'>    <span class="n">val</span> <span class="n">encoded</span> <span class="o">=</span> <span class="n">mystring</span><span class="o">.</span><span class="na">encrypt</span><span class="o">(</span><span class="s">&quot;salt&quot;</span><span class="o">).</span><span class="na">encode</span><span class="o">(</span><span class="s">&quot;UTF-8&quot;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So what identified those functions as Extension Functions?  Simple - the prefixing of the method name with the type <code>String.encode</code>.  No need to create implicit wrappers (Scala), no need to create loads of static classes (C#).  And yes it&#8217;s possible to use generics in these methods as well,</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">fun</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span><span class="o">?.</span><span class="na">getOrElse</span><span class="o">(</span><span class="nl">t:</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">T</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">this</span> <span class="o">?:</span> <span class="n">t</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This can be applied to any nullable type.</p>

<h2>Literal Extension Functions</h2>

<p>An interesting little feature that Kotlin has that makes it a bit different is the use of function literal extension functions.  Basically where you can declare a function as a literal (a lambda method if you will) you can also make that literal an extension function,</p>

<p>So we could take our methods we wrote above and bring them right into our <code>main</code></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">fun</span> <span class="nf">main</span><span class="o">(</span><span class="nl">args:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">val</span> <span class="n">encrypt</span> <span class="o">=</span> <span class="o">{</span> <span class="n">String</span><span class="o">.(</span><span class="nl">salt:</span> <span class="n">String</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">StringBuffer</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">salt</span><span class="o">)?.</span><span class="na">reverse</span><span class="o">().</span><span class="na">toString</span><span class="o">()}</span>
</span><span class='line'>    <span class="n">val</span> <span class="n">encode</span> <span class="o">=</span> <span class="o">{</span> <span class="n">String</span><span class="o">.(</span><span class="nl">encoding:</span> <span class="n">String</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">this</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">encoding</span><span class="o">)</span> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">val</span> <span class="n">mystring</span> <span class="o">=</span> <span class="s">&quot;james&quot;</span>
</span><span class='line'>    <span class="n">val</span> <span class="n">encoded</span> <span class="o">=</span> <span class="n">mystring</span><span class="o">.</span><span class="na">encrypt</span><span class="o">(</span><span class="s">&quot;salt&quot;</span><span class="o">).</span><span class="na">encode</span><span class="o">(</span><span class="s">&quot;UTF-8&quot;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This may seem quite unnecessary at first glance but it become quite powerful when creating DSLs - as demonstrated in the docs around the <a href="http://confluence.jetbrains.net/display/Kotlin/Type-safe+Groovy-style+builders">Groovy Style Builders</a></p>

<p>So Kotlin has extension functions that don&#8217;t require a load of boilerplate (C#) or rather odd implicit syntax (Scala) - cool, right?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kotlin: Here's What I Think (For Now)]]></title>
    <link href="http://yobriefca.se/blog/2012/07/15/kotlin-heres-what-i-think/"/>
    <updated>2012-07-15T16:43:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/15/kotlin-heres-what-i-think</id>
    <content type="html"><![CDATA[<blockquote><p>Before I go shooting my mouth off here - a word of warning - I haven&#8217;t really done anything with Kotlin.  I&#8217;ve read the docs, played with the <a href="https://github.com/dodyg/Kotlin101">Kotlin 101 samples</a> and written a few small console type apps.  So take what you want from this post.</p></blockquote>

<p>Want to hear something zany?  There actually are people - real living people, with a fully working brain, many much smarter than me - that are &#8220;happy&#8221; with Java.</p>

<p>Seriously.</p>

<p>I made a move from Java to .NET about 5 years ago and have dipped back in a few times over that period.  Trying new languages is a sure fire way, for some at least, to make you realise Java is not a language that makes coding fun, or productive.  Java put me right of the JVM.  Any language that makes woking with collections (something you&#8217;ll do alot) so long winded and noisy deserves to be shunned.  But this isn&#8217;t a Java rant - the JVM is great but it&#8217;s just marketed badly because of Java.</p>

<p>But all the JVM-hate that Java instilled in me 5 years ago; the last 6 months of working with Scala has replaced with love.  So I&#8217;ve been looking around the JVM world and discovered <a href="http://kotlin.jetbrains.org/">Kotlin</a> a new JVM based language from JetBrains.  Its much closer to Java than what Scala or Clojure is (intentionally).</p>

<p>One main thing that Kotlin brings to the table is pragmatism.  Without trying to belittle Kotlin - it&#8217;s almost like CoffeeScript for Java (yep kind of like what <a href="http://www.eclipse.org/xtend/">Xtend</a> is.  Kotlin removes all those annoying necessities in Java that make your code verbose (checked exceptions, semi-colons, null reference checks etc.).  It also adds things that make your life much easier (extension methods, functional collection manipulation etc.).</p>

<p>When you write Ruby for the first time you notice that many things just work out like you&#8217;d expect, the syntax is quite natural.  The same cannot be said for Java - there is just way too much boilerplate.  Kotlin helps reduce that boilerplate.  So, by extension, it could be said that Kotlin makes you more productive.  A person who knows Java will find Kotlin no challenge to start using - the syntax is nicely aligned, just without the noise.</p>

<p>Many people, when trying to get their team to adopt Scala, use the &#8220;you can use Scala like Java til you get used to it&#8221; mantra.  I don&#8217;t agree with that.  Academically it&#8217;s true but the minute you start working with other peoples Scala code - you&#8217;ve just gotta know Scala and when they have a slew of Implicits thrown in your Scala as Java stuff goes out the window.  Kotlin, on the other hand, has some of the nice functional patterns from Scala but none of the &#8220;magic-to-a-newcomer&#8221; features that can make grown men weep.  Now the Kotlin docs themselves even go as far as stating</p>

<blockquote><p>  If you are happy with Scala, you probably don&#8217;t need Kotlin.</p></blockquote>

<p>But I think they are selling themselves short - I think plenty of people use Scala but could easily use Kotlin in its place and find themselves in a better place (easier upskilling, less cryptic codebase).</p>

<p>Anyway this is a bit of a ramble, what I&#8217;m saying is - Kotlin has some really rather nice features (Groovy Like DSL Builders, Pattern Matching, the <code>when</code> expression, lambdas, Kotlin to JavaScript compilation(!) etc.) and people happy with either Java OR Scala should give it a go.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Technology in the Cloud]]></title>
    <link href="http://yobriefca.se/blog/2012/07/12/technology-in-the-cloud/"/>
    <updated>2012-07-12T13:59:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/12/technology-in-the-cloud</id>
    <content type="html"><![CDATA[<p>The Cloud.  As much as the term has been pummelled into meaningless marketing sputum by the guys in expensive suits and fake smiles it does exist and is distinct from a typical &#8220;throw all your stuff in a data center&#8221; setup.</p>

<p>The Cloud is distinct, as well, in terms of how you think about your solution architecture.  The typical old school approach would be to just create big monoliths to process your data but that doesn&#8217;t work out so well in the cloud.  Of course the considerations for the cloud aren&#8217;t new, hell no - things like SOA have been around for an age, but if you want to harness the benefits of the cloud as the internet intended you will be narrowing your options.  No more just cobbling common bits together and crossing your fingers.</p>

<p>So fine - architecting for the cloud has some special considerations but thats not what I want to talk about - there are better people than me to cover that.</p>

<p>What I want to talk about is use of technology within that architecture.  I&#8217;ve never been a fan of the one-size-fits-all-painful-or-not technology stack driven almost solely by a need to avoid unnecessary education of developers.  And, now I feel the cloud is strengthening my view that a default stack is more trouble than it&#8217;s worth.  More importantly it&#8217;s really adding momentum to the whole polyglot architecture, or simply using the right tools for the job.</p>

<p>Let me explain.  Any default stack, by definition, needs to cater to many user cases and as such brings a certain amount of sacrifice with it.  Sacrifices come in many forms but usually in performance, memory footprint and/or verbose configuration.  In the cloud you are, in essence, in a Pay-As-You-Go model, every clock cycle and every bit of storage costs.  Now that heavy ORM with its less than ideal queries and slow relationship mapping is starting to cost you money EVERY request.  <span class='pullquote-right' data-pullquote='"In the cloud the default stack can easily bleed money." '> In fact, it&#8217;s probably backed by that storage heavy relational database for all your non-relational data.  Same for that rather large web framework you&#8217;ve got there&#8230;. every time to deal with a spike and scale that badboy out and you&#8217;re having to use medium instances rather than small.  That SOAP based webservice that requires triple the bandwidth to service a request&#8230; ugh you get the point. &#8220;In the cloud the default stack can easily bleed money.&#8221;
</span></p>

<p>I guess this is less about the default stack and more about just using the right tools to get the job done in the most effective manner - afterall you&#8217;re paying for this stuff now.  You kind of were before but in such a coarse grained manner it didn&#8217;t matter - it does now.</p>

<p>In summary - the cloud has started to make technology decisions more accountable and we need to ensure that those decisions aren&#8217;t costing our stakeholders more money than necessary.</p>

<p>PS.</p>

<p>I&#8217;m not going to sit here and preach about the which specific technologies to use but come on - if your storing Session State in a Oracle database, switch to Riak, or Redis.  If you&#8217;re building a nice scalable API then use something like Scala which promotes immutable state and concurrency out of the box over something like vanilla Java (or perhaps just a better framework Spring-WS vs Dropwizard for example).  JSON over XML or a binary format (Protobuf for example) for machine to machine communication.  A small node.js web site over ASP.NET Webforms for simple sites.  The list goes on.  That is to say consider this advice against the other factors driving technical decisions - dont JUST go for the smallest, lightest tools because it MIGHT be cheaper.  Do the research.</p>

<p>Finally, perhaps you&#8217;ve got another IT team needing to support this new solution?  Bring them along this journey too, educate them as you educate yourself, dont just throw the finished thing over the wall with a 1 week handover and a pat on the back.</p>

<p>Don&#8217;t be afraid - it&#8217;s a super fun world we live in!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Azure Website Workflow for Bosses]]></title>
    <link href="http://yobriefca.se/blog/2012/07/12/azure-website-workflow-for-bosses/"/>
    <updated>2012-07-12T12:23:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/12/azure-website-workflow-for-bosses</id>
    <content type="html"><![CDATA[<blockquote><p>So consider my indefinite hiatus suspended definitely.  I suck at quitting!  But we wont dive into the whys and wherefores  around that now.</p></blockquote>

<p>I&#8217;ve a confession to make, the &#8220;new&#8221; Azure, I like it.  Yeah I do, s&#8217;nice.  I like the way it blends PaaS with IaaS (though I do feel that adding 1st class node.js and PHP support is a bit of a tacked on marketing ploy).  So you dont have the &#8220;Add-On&#8221; model you get from Appharbor and Heroku but thats fine because this blending of &#8220;as a Services&#8221; gives you an alternate approach.  For a start you can just use the external services without them having to be &#8220;Add-Ons&#8221;.  Sure you lose out on the nice automatic integration points for managing your services but it&#8217;s not the end of the world and what happens when you want something that isn&#8217;t available as an Add-On or worse not available as a cloudy SaaS thing?  Well I guess you need to go off to EC2 or similar and host your own (assuming you want to stick with the cloudy infrastructure).  But with Azure you also get another option - you want to use Mongo or some huge enterprisey platform that isn&#8217;t SaaSified?  Stick it on an Azure VM.  Everything managed under one cloud provider.  Thats such a nice thing to have at your disposal.</p>

<p>But thats not the point of this post.  Most posts out there cover a workflow for Azure WebSites that make use of the portal to provision new sites (and then usually <code>git</code> to deploy) but that&#8217;s weak sauce (the portal part at least - gits still aces).  No, no no - You want hyper-productivity, you want automated provisioning,  you want to be hip; node.js hip; and you want to feel like a boss hanging out on your command line while other &#8220;lesser people&#8221; click stuff with a silly little rodent.  I just read your mind, didn&#8217;t I?  Well then - you got that with Azure.</p>

<h2>Setting Up</h2>

<p>First things first you need to install a few things.</p>

<h3>Installing node.js + NPM</h3>

<p><a href="http://nodejs.org/#download">Download</a></p>

<p>The tools are built and deployed in node via NPM, the node package manager so just run the one click installer and you&#8217;ll be all setup.</p>

<h3>Installing Azure CLI Tools</h3>

<p>Install these via NPM so fire up your terminal/command prompt/whatever and type</p>

<pre><code>npm install azure -g
</code></pre>

<p>Then let NPM install all the dependencies and what not (the <code>-g</code> option just tells NPM to install the tools globally so they are accessible from the command line)</p>

<h3>Adding your account</h3>

<p>Next up you need to tell azure what account to use so fire this command into you command line</p>

<pre><code>azure account download
</code></pre>

<p>You&#8217;ll then be taken to the Azure website and it should (assuming you&#8217;re logged in already) download a <code>publishsettings</code> file.  Next up you need to import this file into your azure toolchain.</p>

<pre><code>azure account import YOUR_DOWNLOADED_FILE.publishsettings
</code></pre>

<p>After some scrolling text you&#8217;ll be all set up and ready to deploy.  You&#8217;ll be asked to delete the file you downloaded - probably best to do this :)</p>

<h2>Creating the app</h2>

<p>OK then lets create an app - what we create is irrelevant here so lets just create the default ASP.NET MVC website and use that as our sample app.  Remeber though, if you&#8217;re a cutting edge awesome-addict to switch from .NET 4.5 to 4 or else you&#8217;ll get some issues when deploying your site to Azure.</p>

<blockquote><p><strong>UPDATE</strong> : The next few steps can be condensed, thanks to the feedback from Glenn Block (@gblock),
<blockquote class="twitter-tweet" data-in-reply-to="224800579388575744"><p>@<a href="https://twitter.com/kouphax">kouphax</a> oh dude, you don&#8217;t need all those steps! Do &#8220;azure site create my site &#8211;git&#8221; It will create the repo for you and add the remote!</p>&mdash; Glenn Block (@gblock) <a href="https://twitter.com/gblock/status/224855192800215040" data-datetime="2012-07-16T13:17:10+00:00">July 16, 2012</a></blockquote></p></blockquote>

<script src="http://yobriefca.se//platform.twitter.com/widgets.js" charset="utf-8"></script>


<blockquote><p>This sets up your git repo during creation of the site, adds the remote endpoint and even generates a .gitignore file (which you need to edit yourelf for .NET projects.  WIN!!!!</p>

<p>Anyway&#8230;. on with the old post.</p></blockquote>

<p>Once you&#8217;ve created you app and saved it then you&#8217;ll want to intialise an empty repo at the root of the solution,</p>

<pre><code>git init
</code></pre>

<p>Then we need to create a site on Azure we can push to.</p>

<h2>Creating a new site</h2>

<p>Back to the command line now,</p>

<pre><code>azure site create SITE_NAME
</code></pre>

<p>If we execute this, again at the root of our solution, it will do a number of things,</p>

<ol>
<li>Validate the request (site name availability and what not)</li>
<li>Create a new site on Azure</li>
<li>Add a new git <code>remote</code> to your <code>.git\config</code> file</li>
</ol>


<h2>Pushing site</h2>

<p>As I&#8217;ve said the last command actually added a remote repo to our git configuration so if we do the usual gitty stuff (you&#8217;ll want to, for neatness sake, set up your <code>.gitignore</code> but we can skip this for brevity),</p>

<pre><code>git add -A
git commit -m "Boring commit message"
</code></pre>

<p>Now we push,</p>

<pre><code>git push azure master
</code></pre>

<p>Done!</p>

<h2>Viewing your site</h2>

<p>You could just browse to your new site but thats just not hip enough, hell no.  Instead lets launch it from the command line&#8230;</p>

<pre><code>azure site browse
</code></pre>

<p>That will launch our new site without having to touch a silly old, out of date rodent.</p>

<h2>Wrapping up</h2>

<p>Ok so thats the basic workflow for using CLI tools to manage Azure sites.  You can do this with most of the Azure services (VMs, Certs, Cloud Services etc.) aswell.</p>

<p>So apart from making you look all hackery working in the terminal it does have other uses, specifically around the fact terminal command can be easily executed in a headless automated environment.  Think of creating new sites as part of your CI&#8217;s deployment pipeline, or as part of some disaster recovery process.  The possibilities are endless&#8230; heck even write your own UI for managing sites or deploying new sites/VM/whatever!</p>

<p>So lets see -</p>

<ul>
<li>CLI hackery coolness&#8230; ✓</li>
<li>Node.js hipster bragging rights&#8230; ✓</li>
<li>Azure website created and deployed with about 6 commands&#8230; ✓</li>
</ul>


<p>Not bad for a few minutes work!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quitsies, Well Sort Of]]></title>
    <link href="http://yobriefca.se/blog/2012/07/03/quitsies/"/>
    <updated>2012-07-03T19:08:00+01:00</updated>
    <id>http://yobriefca.se/blog/2012/07/03/quitsies</id>
    <content type="html"><![CDATA[<blockquote><p>You know when you start to question why you write these things it&#8217;s probably time to quit, or at least take a break.</p>

<p> ~ me, just there now</p></blockquote>

<p>This more of an FYI to anyone who may read this blog than a horrible diatribe about how I am wasting my life with meaningless exercises or technologies I&#8217;ll never get to use to a bunch of people that don&#8217;t really care, what would be the point?  Plus - it&#8217;s probably not even true.</p>

<p>So rather than pottering on about cool and interesting technologies that will make everyones (read, developers) life infinitely better 100% guaranteed I&#8217;ve decided to devote my time to,</p>

<ol>
<li>Working on some startup-py type things that have been milling around the back of my head for some time, and,</li>
<li>Generally getting stuff done</li>
</ol>


<p>Yep, like a hipster band, this little testament to bike-shedding is going on indefinite hiatus.</p>
]]></content>
  </entry>
  
</feed>
