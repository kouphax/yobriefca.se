
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>UpdatePanels & Alternatives - Yo Briefcase!</title>
  <meta name="author" content="James Hughes">

  <link href='http://fonts.googleapis.com/css?family=Port+Lligat+Slab' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Fresca' rel='stylesheet' type='text/css'>

  
  <meta name="description" content="I&rsquo;m not sold on ASP.NET UpdatePanels. Conceptually they are quite nice but their implementation is nasty. So much so I&rsquo;d be happy to say &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yobriefca.se/blog/2009/04/15/updatepanels-alternatives">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/feed" rel="alternate" title="Yo Briefcase!" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19143623-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
  <div id="thingyattop" style="height:1px; background-color: #AAA; border-bottom: 1px solid #E0E0E0"></div>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
   
  <header>
    
      <h1 class="entry-title">UpdatePanels & Alternatives</h1>
    

    
      <p class="meta">
        
          <span class="label" style="margin-right:10px;"><a href="/" style="text-decoration:none; text-transform:none; color:#fff">&larr;</a></span>
         
        








  


<time datetime="2009-04-15T00:00:00+01:00" pubdate data-updated="true">Apr 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content">  <p><p>I&rsquo;m not sold on ASP.NET UpdatePanels. Conceptually they are quite nice but their implementation is nasty. So much so I&rsquo;d be happy to say the should be considered an anti-pattern. My reasons? Well&hellip;</p><ul><li>They generate too much JavaScript</li><li>It&rsquo;s too &ldquo;development focused&rdquo; &ndash; it puts saving time ahead of a clean performant solution</li><li>Ajax calls should be data focused (returning XML, JSON etc), UpdatePanels are content focused</li><li>Generates a massive amount of network traffic in comparison to alternative solutions (including ViewState and markup)</li><li>UpdatePanels use innerHTML to replace contents which orphans bound events (leakage) that need to be rebound each time (extra work).</li></ul><p>But what are the alternatives? Page Methods and Scripted Services are a good starting point. The good things about these alternatives is that they are lightweight &ndash; they send JSON data to and from the server so your network traffic is greatly reduced. Here is a simple example of using a page method &ndash; I&rsquo;ll not cover Scripted Services as they are very similar and you can find info about them on the net.</p><p>In your code behind you can add a [WebMethod] attributed method</p><div><span style="font-size: small;"><span><script src="https://gist.github.com/632988.js"></script></span></span></div><p>And turn on EnablePageMethods attribute of the pages ScriptManager</p><div><span style="font-size: small;"><span><script src="https://gist.github.com/632990.js"></script></span></span></div><p>What happens next is that when the page is rendered a JavaScript Proxy Class will be generated called PageMethods that contains a function call GetCurrentDateAndTime. It&rsquo;ll look something like this.</p><div><span style="font-size: small;"><span><script src="https://gist.github.com/632991.js"></script></span></span></div><p>Now all we have to do is use it. This is easy&hellip;</p><div><span style="font-size: small;"><span><script src="https://gist.github.com/632994.js"></script></span></span></div><p>That wasn&rsquo;t too difficult now was it? But we aren&rsquo;t done yet. Sure this solution works but there is still one problem &ndash; We are including the ScriptManager in our page which means event though all we are doing is getting a date back from the server we are still required to pull down at least 160k (in it&rsquo;s most compressed &amp; gzipped form) of framework 90% of which we aren&rsquo;t even going to use.</p><h3>Calling PageMethods and ScriptedServices using jQuery</h3><p>Obviously a request from client to server is always done through HTTP it doesn&rsquo;t actually matter how it is handled on the client. So it&rsquo;s easy to swap out the ASP.NET Ajax framework for jQuery. You&rsquo;ll probably be asking why? Well the long and short of it is that regardless of what the requirements say you (or someone else on the project) WILL end up writing Javascript and jQuery is the better choice&hellip;</p><ul><li>It&rsquo;s a better, smaller, compact and faster framework</li><li>It&rsquo;s much better documented and easier to learn</li><li>It&rsquo;s extensible via plugins so you don&rsquo;t need the whole &ldquo;kitchen sink&rdquo; to do simple things</li><li>It can do everything ASP.NET Ajax can do</li><li>It&rsquo;s technology agnostic so you can jump to a Java project and use the same solutions</li></ul><p>I could go on, honestly I could, but that&rsquo;s not what this post is about. There are a few nuances in calling PageMethods and ScriptedServices, namely</p><ul><li>The request content-type must be&nbsp;<code>application/json; charset=utf-8</code></li><li>The request must be a POST request</li><li>Data sent to the server must be encoded as a JSON string or &ldquo;{}&rdquo; if empty</li><li>Standard ASP.NET JSON serialization doesn&rsquo;t convert DateTime to a proper JSON date</li><li>The JSON data in the request must map directly to arguments of the function</li></ul><p>Failure to comply with any of the above will result in either a security error or, usually, the entire page being rendered back to the response. So calling the above PageMethod using jQuery is as simple as this&hellip;.</p><div><span style="font-size: small;"><span><script src="https://gist.github.com/632996.js"></script></span></span></div><p>Not bad, but there is a lot of boiler plate code there. Thankfully it&rsquo;s easy to write a jQuery plugin to abstract out most of this and make the calls simple.&nbsp;So all in all even with the 2 plugins (JSON and .Net Services) and the jQuery framework we are only forced to pull down 60k of scripts (minified but NOT gzipped) so you could see this reduced to 25-30k all in with gzipping turned on.</p></p></div>


  <footer>
    <p class="meta">
      








  


<time datetime="2009-04-15T00:00:00+01:00" pubdate data-updated="true">Apr 15<span>th</span>, 2009</time>
      

<span style="float:right">
  
    <a href='/blog/categories/asp-net/' style='text-decoration:none;'><span class='label label-info'>asp.net</span></a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://yobriefca.se/blog/2009/04/15/updatepanels-alternatives/" data-via="kouphax" data-counturl="http://yobriefca.se/blog/2009/04/15/updatepanels-alternatives/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>
    
    <p class="meta">
      
      
        <a class="basic-alignment right" href="/blog/2009/05/19/javascript-method-overloading/" title="next Post: JavaScript Method Overloading">JavaScript Method Overloading &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <script>var dis_inpost = true;</script>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

    </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'kouphax';
      
        
        if(window.dis_inpost){
          var disqus_identifier = 'http://yobriefca.se/blog/2009/04/15/updatepanels-alternatives/';
          var disqus_url = 'http://yobriefca.se/blog/2009/04/15/updatepanels-alternatives/';
          var disqus_script = 'embed.js';
        }else{
          var disqus_script = 'count.js';
        }

      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
